import{Transform as s}from"/-/vega-dataflow@v5.7.5-asKYS4gpPLMPf64pSozt/dist=es2020,mode=imports,min/optimized/vega-dataflow.js";import{inherits as u}from"/-/vega-util@v1.17.2-LUfkDhormMyfWqy3Ts6U/dist=es2020,mode=imports,min/optimized/vega-util.js";import{Delaunay as f}from"/-/d3-delaunay@v6.0.4-8vxm7aIldY6XMTxF521F/dist=es2020,mode=imports,min/optimized/d3-delaunay.js";function l(e){s.call(this,null,e)}l.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const y=[-1e5,-1e5,1e5,1e5];u(l,s,{transform(e,n){const r=e.as||"path",t=n.source;if(!t||!t.length)return n;let o=e.size;o=o?[0,0,o[0],o[1]]:(o=e.extent)?[o[0][0],o[0][1],o[1][0],o[1][1]]:y;const m=this.value=f.from(t,e.x,e.y).voronoi(o);for(let i=0,d=t.length;i<d;++i){const a=m.cellPolygon(i);t[i][r]=a&&!h(a)?g(a):null}return n.reflow(e.modified()).modifies(r)}});function g(e){const n=e[0][0],r=e[0][1];let t=e.length-1;for(;e[t][0]===n&&e[t][1]===r;--t);return"M"+e.slice(0,t+1).join("L")+"Z"}function h(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}export{l as voronoi};export default null;
