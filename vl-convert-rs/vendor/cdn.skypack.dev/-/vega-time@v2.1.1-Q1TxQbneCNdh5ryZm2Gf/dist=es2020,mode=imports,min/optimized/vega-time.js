import{array as Mt,error as W,hasOwnProperty as Tt,extend as Ut,span as yt,peek as Yt,toSet as ht,constant as Ct,zero as S,one as St}from"/-/vega-util@v1.17.1-uwuqwLZrXXBeO0DFYRgh/dist=es2020,mode=imports,min/optimized/vega-util.js";import{timeDay as $,timeWeek as G,utcDay as b,utcWeek as _,timeYear as wt,timeMonth as K,timeHour as pt,timeMinute as Ft,timeSecond as It,timeMillisecond as kt,utcYear as vt,utcMonth as P,utcHour as Et,utcMinute as Ot,utcSecond as Ht,utcMillisecond as Nt}from"/-/d3-time@v3.1.0-hkusO1LcNQpH1ccXwop7/dist=es2020,mode=imports,min/optimized/d3-time.js";import{bisector as $t,tickStep as V}from"/-/d3-array@v3.2.2-mREp9VYvdluM4XTkemzD/dist=es2020,mode=imports,min/optimized/d3-array.js";const s="year",D="quarter",f="month",a="week",g="date",l="day",U="dayofyear",M="hours",T="minutes",y="seconds",Y="milliseconds",Z=[s,D,f,a,g,l,U,M,T,y,Y],R=Z.reduce((t,e,n)=>(t[e]=1+n,t),{});function J(t){const e=Mt(t).slice(),n={};e.length||W("Missing time unit."),e.forEach(o=>{Tt(R,o)?n[o]=1:W(`Invalid time unit: ${o}.`)});const r=(n[a]||n[l]?1:0)+(n[D]||n[f]||n[g]?1:0)+(n[U]?1:0);return r>1&&W(`Incompatible time units: ${t}`),e.sort((o,c)=>R[o]-R[c]),e}const bt={[s]:"%Y ",[D]:"Q%q ",[f]:"%b ",[g]:"%d ",[a]:"W%U ",[l]:"%a ",[U]:"%j ",[M]:"%H:00",[T]:"00:%M",[y]:":%S",[Y]:".%L",[`${s}-${f}`]:"%Y-%m ",[`${s}-${f}-${g}`]:"%Y-%m-%d ",[`${M}-${T}`]:"%H:%M"};function xt(t,e){const n=Ut({},bt,e),r=J(t),o=r.length;let c="",i=0,u,d;for(i=0;i<o;)for(u=r.length;u>i;--u)if(d=r.slice(i,u).join("-"),n[d]!=null){c+=n[d],i=u;break}return c.trim()}const h=new Date;function q(t){return h.setFullYear(t),h.setMonth(0),h.setDate(1),h.setHours(0,0,0,0),h}function Wt(t){return tt(new Date(t))}function Rt(t){return A(new Date(t))}function tt(t){return $.count(q(t.getFullYear())-1,t)}function A(t){return G.count(q(t.getFullYear())-1,t)}function j(t){return q(t).getDay()}function qt(t,e,n,r,o,c,i){if(0<=t&&t<100){const u=new Date(-1,e,n,r,o,c,i);return u.setFullYear(t),u}return new Date(t,e,n,r,o,c,i)}function At(t){return et(new Date(t))}function jt(t){return z(new Date(t))}function et(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return b.count(e-1,t)}function z(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return _.count(e-1,t)}function L(t){return h.setTime(Date.UTC(t,0,1)),h.getUTCDay()}function zt(t,e,n,r,o,c,i){if(0<=t&&t<100){const u=new Date(Date.UTC(-1,e,n,r,o,c,i));return u.setUTCFullYear(n.y),u}return new Date(Date.UTC(t,e,n,r,o,c,i))}function nt(t,e,n,r,o){const c=e||1,i=Yt(t),u=(O,H,N)=>(N=N||O,Lt(n[N],r[N],O===i&&c,H)),d=new Date,m=ht(t),st=m[s]?u(s):Ct(2012),lt=m[f]?u(f):m[D]?u(D):S,ft=m[a]&&m[l]?u(l,1,a+l):m[a]?u(a,1):m[l]?u(l,1):m[g]?u(g,1):m[U]?u(U,1):St,mt=m[M]?u(M):S,dt=m[T]?u(T):S,Dt=m[y]?u(y):S,gt=m[Y]?u(Y):S;return function(O){d.setTime(+O);const H=st(d);return o(H,lt(d),ft(d,H),mt(d),dt(d),Dt(d),gt(d))}}function Lt(t,e,n,r){const o=n<=1?t:r?(c,i)=>r+n*Math.floor((t(c,i)-r)/n):(c,i)=>n*Math.floor(t(c,i)/n);return e?(c,i)=>e(o(c,i),i):o}function C(t,e,n){return e+t*7-(n+6)%7}const Xt={[s]:t=>t.getFullYear(),[D]:t=>Math.floor(t.getMonth()/3),[f]:t=>t.getMonth(),[g]:t=>t.getDate(),[M]:t=>t.getHours(),[T]:t=>t.getMinutes(),[y]:t=>t.getSeconds(),[Y]:t=>t.getMilliseconds(),[U]:t=>tt(t),[a]:t=>A(t),[a+l]:(t,e)=>C(A(t),t.getDay(),j(e)),[l]:(t,e)=>C(1,t.getDay(),j(e))},Qt={[D]:t=>3*t,[a]:(t,e)=>C(t,0,j(e))};function Bt(t,e){return nt(t,e||1,Xt,Qt,qt)}const Gt={[s]:t=>t.getUTCFullYear(),[D]:t=>Math.floor(t.getUTCMonth()/3),[f]:t=>t.getUTCMonth(),[g]:t=>t.getUTCDate(),[M]:t=>t.getUTCHours(),[T]:t=>t.getUTCMinutes(),[y]:t=>t.getUTCSeconds(),[Y]:t=>t.getUTCMilliseconds(),[U]:t=>et(t),[a]:t=>z(t),[l]:(t,e)=>C(1,t.getUTCDay(),L(e)),[a+l]:(t,e)=>C(z(t),t.getUTCDay(),L(e))},_t={[D]:t=>3*t,[a]:(t,e)=>C(t,0,L(e))};function Kt(t,e){return nt(t,e||1,Gt,_t,zt)}const Pt={[s]:wt,[D]:K.every(3),[f]:K,[a]:G,[g]:$,[l]:$,[U]:$,[M]:pt,[T]:Ft,[y]:It,[Y]:kt},Vt={[s]:vt,[D]:P.every(3),[f]:P,[a]:_,[g]:b,[l]:b,[U]:b,[M]:Et,[T]:Ot,[y]:Ht,[Y]:Nt};function X(t){return Pt[t]}function Q(t){return Vt[t]}function ot(t,e,n){return t?t.offset(e,n):void 0}function Zt(t,e,n){return ot(X(t),e,n)}function Jt(t,e,n){return ot(Q(t),e,n)}function rt(t,e,n,r){return t?t.range(e,n,r):void 0}function te(t,e,n,r){return rt(X(t),e,n,r)}function ee(t,e,n,r){return rt(Q(t),e,n,r)}const w=1e3,p=w*60,F=p*60,x=F*24,ne=x*7,ut=x*30,B=x*365,it=[s,f,g,M,T,y,Y],I=it.slice(0,-1),k=I.slice(0,-1),v=k.slice(0,-1),oe=v.slice(0,-1),re=[s,a],ct=[s,f],at=[s],E=[[I,1,w],[I,5,5*w],[I,15,15*w],[I,30,30*w],[k,1,p],[k,5,5*p],[k,15,15*p],[k,30,30*p],[v,1,F],[v,3,3*F],[v,6,6*F],[v,12,12*F],[oe,1,x],[re,1,ne],[ct,1,ut],[ct,3,3*ut],[at,1,B]];function ue(t){const e=t.extent,n=t.maxbins||40,r=Math.abs(yt(e))/n;let o=$t(u=>u[2]).right(E,r),c,i;return o===E.length?(c=at,i=V(e[0]/B,e[1]/B,n)):o?(o=E[r/E[o-1][2]<E[o][2]/r?o-1:o],c=o[0],i=o[1]):(c=it,i=Math.max(V(e[0],e[1],n),1)),{units:c,step:i}}export{g as DATE,l as DAY,U as DAYOFYEAR,M as HOURS,Y as MILLISECONDS,T as MINUTES,f as MONTH,D as QUARTER,y as SECONDS,Z as TIME_UNITS,a as WEEK,s as YEAR,Wt as dayofyear,ue as timeBin,Bt as timeFloor,X as timeInterval,Zt as timeOffset,te as timeSequence,xt as timeUnitSpecifier,J as timeUnits,Kt as utcFloor,Q as utcInterval,Jt as utcOffset,ee as utcSequence,At as utcdayofyear,jt as utcweek,Rt as week};export default null;
