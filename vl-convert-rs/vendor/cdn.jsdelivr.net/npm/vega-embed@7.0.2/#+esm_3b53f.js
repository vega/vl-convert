/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/vega-embed@7.0.2/build/embed.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import e from"/npm/json-stringify-pretty-compact@4.0.0/+esm";import*as t from"/npm/vega@6.2.0/+esm";import{isString as r,mergeConfig as n,isBoolean as o,isObject as i,writeConfig as s}from"/npm/vega@6.2.0/+esm";import{expressionInterpreter as a}from"/npm/vega-interpreter@2.0.0/+esm";import*as c from"/npm/vega-lite@6.1.0/+esm";import p from"/npm/vega-schema-url-parser@3.0.2/+esm";import*as l from"/npm/vega-themes@3.0.0/+esm";import{Handler as u}from"/npm/vega-tooltip@1.0.0/+esm";var h="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function f(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}var E=f,m=d;function v(e){if(E===setTimeout)return setTimeout(e,0);if((E===f||!E)&&setTimeout)return E=setTimeout,setTimeout(e,0);try{return E(e,0)}catch(t){try{return E.call(null,e,0)}catch(t){return E.call(this,e,0)}}}"function"==typeof h.setTimeout&&(E=setTimeout),"function"==typeof h.clearTimeout&&(m=clearTimeout);var g,w=[],O=!1,I=-1;function R(){O&&g&&(O=!1,g.length?w=g.concat(w):I=-1,w.length&&$())}function $(){if(!O){var e=v(R);O=!0;for(var t=w.length;t;){for(g=w,w=[];++I<t;)g&&g[I].run();I=-1,t=w.length}g=null,O=!1,function(e){if(m===clearTimeout)return clearTimeout(e);if((m===d||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(e);try{return m(e)}catch(t){try{return m.call(null,e)}catch(t){return m.call(this,e)}}}(e)}}function A(e,t){this.fun=e,this.array=t}A.prototype.run=function(){this.fun.apply(null,this.array)};function N(){}var L=N,T=N,y=N,b=N,S=N,_=N,P=N;var x=h.performance||{},D=x.now||x.mozNow||x.msNow||x.oNow||x.webkitNow||function(){return(new Date).getTime()};var C=new Date;var F,M={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];w.push(new A(e,t)),1!==w.length||O||v($)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:L,addListener:T,once:y,off:b,removeListener:S,removeAllListeners:_,emit:P,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*D.call(x),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-C)/1e3}},j=(F=function(e,t){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},F(e,t)},function(e,t){function r(){this.constructor=e}F(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),G=Object.prototype.hasOwnProperty;
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */function U(e,t){return G.call(e,t)}function k(e){if(Array.isArray(e)){for(var t=new Array(e.length),r=0;r<t.length;r++)t[r]=""+r;return t}if(Object.keys)return Object.keys(e);var n=[];for(var o in e)U(e,o)&&n.push(o);return n}function X(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function V(e){for(var t,r=0,n=e.length;r<n;){if(!((t=e.charCodeAt(r))>=48&&t<=57))return!1;r++}return!0}function H(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function B(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function z(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,r=e.length;t<r;t++)if(z(e[t]))return!0}else if("object"==typeof e)for(var n=k(e),o=n.length,i=0;i<o;i++)if(z(e[n[i]]))return!0;return!1}function W(e,t){var r=[e];for(var n in t){var o="object"==typeof t[n]?JSON.stringify(t[n],null,2):t[n];void 0!==o&&r.push(n+": "+o)}return r.join("\n")}var J=function(e){function t(t,r,n,o,i){var s=this.constructor,a=e.call(this,W(t,{name:r,index:n,operation:o,tree:i}))||this;return a.name=r,a.index=n,a.operation=o,a.tree=i,Object.setPrototypeOf(a,s.prototype),a.message=W(t,{name:r,index:n,operation:o,tree:i}),a}return j(t,e),t}(Error),Y=J,q=X,Q={add:function(e,t,r){return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){var n=e[t];return delete e[t],{newDocument:r,removed:n}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:function(e,t,r){var n=Z(r,this.path);n&&(n=X(n));var o=ee(r,{op:"remove",path:this.from}).removed;return ee(r,{op:"add",path:this.path,value:o}),{newDocument:r,removed:n}},copy:function(e,t,r){var n=Z(r,this.from);return ee(r,{op:"add",path:this.path,value:X(n)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:oe(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}},K={add:function(e,t,r){return V(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){return{newDocument:r,removed:e.splice(t,1)[0]}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:Q.move,copy:Q.copy,test:Q.test,_get:Q._get};function Z(e,t){if(""==t)return e;var r={op:"_get",path:t};return ee(e,r),r.value}function ee(e,t,r,n,o,i){if(void 0===r&&(r=!1),void 0===n&&(n=!0),void 0===o&&(o=!0),void 0===i&&(i=0),r&&("function"==typeof r?r(t,0,e,t.path):re(t,0)),""===t.path){var s={newDocument:e};if("add"===t.op)return s.newDocument=t.value,s;if("replace"===t.op)return s.newDocument=t.value,s.removed=e,s;if("move"===t.op||"copy"===t.op)return s.newDocument=Z(e,t.from),"move"===t.op&&(s.removed=e),s;if("test"===t.op){if(s.test=oe(e,t.value),!1===s.test)throw new Y("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return s.newDocument=e,s}if("remove"===t.op)return s.removed=e,s.newDocument=null,s;if("_get"===t.op)return t.value=e,s;if(r)throw new Y("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,t,e);return s}n||(e=X(e));var a=(t.path||"").split("/"),c=e,p=1,l=a.length,u=void 0,h=void 0,f=void 0;for(f="function"==typeof r?r:re;;){if((h=a[p])&&-1!=h.indexOf("~")&&(h=B(h)),o&&("__proto__"==h||"prototype"==h&&p>0&&"constructor"==a[p-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&void 0===u&&(void 0===c[h]?u=a.slice(0,p).join("/"):p==l-1&&(u=t.path),void 0!==u&&f(t,0,e,u)),p++,Array.isArray(c)){if("-"===h)h=c.length;else{if(r&&!V(h))throw new Y("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",i,t,e);V(h)&&(h=~~h)}if(p>=l){if(r&&"add"===t.op&&h>c.length)throw new Y("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",i,t,e);if(!1===(s=K[t.op].call(t,c,h,e)).test)throw new Y("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return s}}else if(p>=l){if(!1===(s=Q[t.op].call(t,c,h,e)).test)throw new Y("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return s}if(c=c[h],r&&p<l&&(!c||"object"!=typeof c))throw new Y("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",i,t,e)}}function te(e,t,r,n,o){if(void 0===n&&(n=!0),void 0===o&&(o=!0),r&&!Array.isArray(t))throw new Y("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(e=X(e));for(var i=new Array(t.length),s=0,a=t.length;s<a;s++)i[s]=ee(e,t[s],r,!0,o,s),e=i[s].newDocument;return i.newDocument=e,i}function re(e,t,r,n){if("object"!=typeof e||null===e||Array.isArray(e))throw new Y("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,r);if(!Q[e.op])throw new Y("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,r);if("string"!=typeof e.path)throw new Y("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,r);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new Y('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,r);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new Y("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,r);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new Y("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,r);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&z(e.value))throw new Y("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,r);if(r)if("add"==e.op){var o=e.path.split("/").length,i=n.split("/").length;if(o!==i+1&&o!==i)throw new Y("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,r)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==n)throw new Y("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,r)}else if("move"===e.op||"copy"===e.op){var s=ne([{op:"_get",path:e.from,value:void 0}],r);if(s&&"OPERATION_PATH_UNRESOLVABLE"===s.name)throw new Y("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,r)}}function ne(e,t,r){try{if(!Array.isArray(e))throw new Y("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)te(X(t),X(e),r||!0);else{r=r||re;for(var n=0;n<e.length;n++)r(e[n],n,t,void 0)}}catch(e){if(e instanceof Y)return e;throw e}}function oe(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,n,o,i=Array.isArray(e),s=Array.isArray(t);if(i&&s){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(!oe(e[r],t[r]))return!1;return!0}if(i!=s)return!1;var a=Object.keys(e);if((n=a.length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!t.hasOwnProperty(a[r]))return!1;for(r=n;0!=r--;)if(!oe(e[o=a[r]],t[o]))return!1;return!0}return e!=e&&t!=t}var ie=Object.freeze({__proto__:null,JsonPatchError:Y,_areEquals:oe,applyOperation:ee,applyPatch:te,applyReducer:function(e,t,r){var n=ee(e,t);if(!1===n.test)throw new Y("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return n.newDocument},deepClone:q,getValueByPointer:Z,validate:ne,validator:re}),se=new WeakMap,ae=function(e){this.observers=new Map,this.obj=e},ce=function(e,t){this.callback=e,this.observer=t};
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */function pe(e,t){void 0===t&&(t=!1);var r=se.get(e.object);le(r.value,e.object,e.patches,"",t),e.patches.length&&te(r.value,e.patches);var n=e.patches;return n.length>0&&(e.patches=[],e.callback&&e.callback(n)),n}function le(e,t,r,n,o){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var i=k(t),s=k(e),a=!1,c=s.length-1;c>=0;c--){var p=e[u=s[c]];if(!U(t,u)||void 0===t[u]&&void 0!==p&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(o&&r.push({op:"test",path:n+"/"+H(u),value:X(p)}),r.push({op:"remove",path:n+"/"+H(u)}),a=!0):(o&&r.push({op:"test",path:n,value:e}),r.push({op:"replace",path:n,value:t}));else{var l=t[u];"object"==typeof p&&null!=p&&"object"==typeof l&&null!=l&&Array.isArray(p)===Array.isArray(l)?le(p,l,r,n+"/"+H(u),o):p!==l&&(o&&r.push({op:"test",path:n+"/"+H(u),value:X(p)}),r.push({op:"replace",path:n+"/"+H(u),value:X(l)}))}}if(a||i.length!=s.length)for(c=0;c<i.length;c++){var u;U(e,u=i[c])||void 0===t[u]||r.push({op:"add",path:n+"/"+H(u),value:X(t[u])})}}}var ue,he,fe,de,Ee=Object.freeze({__proto__:null,compare:function(e,t,r){void 0===r&&(r=!1);var n=[];return le(e,t,n,"",r),n},generate:pe,observe:function(e,t){var r,n=function(e){return se.get(e)}(e);if(n){var o=function(e,t){return e.observers.get(t)}(n,t);r=o&&o.observer}else n=new ae(e),se.set(e,n);if(r)return r;if(r={},n.value=X(e),t){r.callback=t,r.next=null;var i=function(){pe(r)},s=function(){clearTimeout(r.next),r.next=setTimeout(i)};"undefined"!=typeof window&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return r.patches=[],r.object=e,r.unobserve=function(){pe(r),clearTimeout(r.next),function(e,t){e.observers.delete(t.callback)}(n,r),"undefined"!=typeof window&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},n.observers.set(t,new ce(t,r)),r},unobserve:function(e,t){t.unobserve()}});function me(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ve(){if(de)return fe;de=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return fe=r=>r?"object"!=typeof r?e:r:t}Object.assign({},ie,Ee,{JsonPatchError:J,deepClone:X,escapePathComponent:H,unescapePathComponent:B});var ge,we,Oe,Ie,Re,$e,Ae,Ne,Le,Te,ye,be,Se,_e,Pe,xe,De,Ce,Fe,Me,je,Ge,Ue,ke,Xe,Ve,He,Be,ze,We,Je,Ye={exports:{}};function qe(){if(we)return ge;we=1;const e=Number.MAX_SAFE_INTEGER||9007199254740991;return ge={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:e,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}function Qe(){if(Ie)return Oe;Ie=1;const e=M.env&&M.env.NODE_DEBUG&&/\bsemver\b/i.test(M.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};return Oe=e}function Ke(){return Re||(Re=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:o}=qe(),i=Qe(),s=(t=e.exports={}).re=[],a=t.safeRe=[],c=t.src=[],p=t.safeSrc=[],l=t.t={};let u=0;const h="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",o],[h,n]],d=(e,t,r)=>{const n=(e=>{for(const[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),o=u++;i(e,o,t),l[e]=o,c[o]=t,p[o]=n,s[o]=new RegExp(t,r?"g":void 0),a[o]=new RegExp(n,r?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","\\d+"),d("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),d("MAINVERSION",`(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})`),d("MAINVERSIONLOOSE",`(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})`),d("PRERELEASEIDENTIFIER",`(?:${c[l.NUMERICIDENTIFIER]}|${c[l.NONNUMERICIDENTIFIER]})`),d("PRERELEASEIDENTIFIERLOOSE",`(?:${c[l.NUMERICIDENTIFIERLOOSE]}|${c[l.NONNUMERICIDENTIFIER]})`),d("PRERELEASE",`(?:-(${c[l.PRERELEASEIDENTIFIER]}(?:\\.${c[l.PRERELEASEIDENTIFIER]})*))`),d("PRERELEASELOOSE",`(?:-?(${c[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[l.PRERELEASEIDENTIFIERLOOSE]})*))`),d("BUILDIDENTIFIER",`${h}+`),d("BUILD",`(?:\\+(${c[l.BUILDIDENTIFIER]}(?:\\.${c[l.BUILDIDENTIFIER]})*))`),d("FULLPLAIN",`v?${c[l.MAINVERSION]}${c[l.PRERELEASE]}?${c[l.BUILD]}?`),d("FULL",`^${c[l.FULLPLAIN]}$`),d("LOOSEPLAIN",`[v=\\s]*${c[l.MAINVERSIONLOOSE]}${c[l.PRERELEASELOOSE]}?${c[l.BUILD]}?`),d("LOOSE",`^${c[l.LOOSEPLAIN]}$`),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE",`${c[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),d("XRANGEIDENTIFIER",`${c[l.NUMERICIDENTIFIER]}|x|X|\\*`),d("XRANGEPLAIN",`[v=\\s]*(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:${c[l.PRERELEASE]})?${c[l.BUILD]}?)?)?`),d("XRANGEPLAINLOOSE",`[v=\\s]*(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:${c[l.PRERELEASELOOSE]})?${c[l.BUILD]}?)?)?`),d("XRANGE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAIN]}$`),d("XRANGELOOSE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAINLOOSE]}$`),d("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),d("COERCE",`${c[l.COERCEPLAIN]}(?:$|[^\\d])`),d("COERCEFULL",c[l.COERCEPLAIN]+`(?:${c[l.PRERELEASE]})?`+`(?:${c[l.BUILD]})?(?:$|[^\\d])`),d("COERCERTL",c[l.COERCE],!0),d("COERCERTLFULL",c[l.COERCEFULL],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM",`(\\s*)${c[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",d("TILDE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAIN]}$`),d("TILDELOOSE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAINLOOSE]}$`),d("LONECARET","(?:\\^)"),d("CARETTRIM",`(\\s*)${c[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",d("CARET",`^${c[l.LONECARET]}${c[l.XRANGEPLAIN]}$`),d("CARETLOOSE",`^${c[l.LONECARET]}${c[l.XRANGEPLAINLOOSE]}$`),d("COMPARATORLOOSE",`^${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]})$|^$`),d("COMPARATOR",`^${c[l.GTLT]}\\s*(${c[l.FULLPLAIN]})$|^$`),d("COMPARATORTRIM",`(\\s*)${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]}|${c[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE",`^\\s*(${c[l.XRANGEPLAIN]})\\s+-\\s+(${c[l.XRANGEPLAIN]})\\s*$`),d("HYPHENRANGELOOSE",`^\\s*(${c[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[l.XRANGEPLAINLOOSE]})\\s*$`),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Ye,Ye.exports)),Ye.exports}function Ze(){if(Le)return Ne;Le=1;const e=Qe(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:r}=qe(),{safeRe:n,safeSrc:o,t:i}=Ke(),s=ve(),{compareIdentifiers:a}=function(){if(Ae)return $e;Ae=1;const e=/^[0-9]+$/,t=(t,r)=>{const n=e.test(t),o=e.test(r);return n&&o&&(t=+t,r=+r),t===r?0:n&&!o?-1:o&&!n?1:t<r?-1:1};return $e={compareIdentifiers:t,rcompareIdentifiers:(e,r)=>t(r,e)}}();class c{constructor(o,a){if(a=s(a),o instanceof c){if(o.loose===!!a.loose&&o.includePrerelease===!!a.includePrerelease)return o;o=o.version}else if("string"!=typeof o)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof o}".`);if(o.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",o,a),this.options=a,this.loose=!!a.loose,this.includePrerelease=!!a.includePrerelease;const p=o.trim().match(a.loose?n[i.LOOSE]:n[i.FULL]);if(!p)throw new TypeError(`Invalid Version: ${o}`);if(this.raw=o,this.major=+p[1],this.minor=+p[2],this.patch=+p[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");p[4]?this.prerelease=p[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=p[5]?p[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(e("SemVer.compare",this.version,this.options,t),!(t instanceof c)){if("string"==typeof t&&t===this.version)return 0;t=new c(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(e){return e instanceof c||(e=new c(e,this.options)),a(this.major,e.major)||a(this.minor,e.minor)||a(this.patch,e.patch)}comparePre(t){if(t instanceof c||(t=new c(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],o=t.prerelease[r];if(e("prerelease compare",r,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return a(n,o)}while(++r)}compareBuild(t){t instanceof c||(t=new c(t,this.options));let r=0;do{const n=this.build[r],o=t.build[r];if(e("build compare",r,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return a(n,o)}while(++r)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(t){const e=new RegExp(`^${this.options.loose?o[i.PRERELEASELOOSE]:o[i.PRERELEASE]}$`),r=`-${t}`.match(e);if(!r||r[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===a(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return Ne=c}function et(){if(ye)return Te;ye=1;const e=Ze();return Te=(t,r,n)=>new e(t,n).compare(new e(r,n))}function tt(){if(Xe)return ke;Xe=1;const e=function(){if(Se)return be;Se=1;const e=et();return be=(t,r,n)=>0===e(t,r,n)}(),t=function(){if(Pe)return _e;Pe=1;const e=et();return _e=(t,r,n)=>0!==e(t,r,n)}(),r=function(){if(De)return xe;De=1;const e=et();return xe=(t,r,n)=>e(t,r,n)>0}(),n=function(){if(Fe)return Ce;Fe=1;const e=et();return Ce=(t,r,n)=>e(t,r,n)>=0}(),o=function(){if(je)return Me;je=1;const e=et();return Me=(t,r,n)=>e(t,r,n)<0}(),i=function(){if(Ue)return Ge;Ue=1;const e=et();return Ge=(t,r,n)=>e(t,r,n)<=0}();return ke=(s,a,c,p)=>{switch(a){case"===":return"object"==typeof s&&(s=s.version),"object"==typeof c&&(c=c.version),s===c;case"!==":return"object"==typeof s&&(s=s.version),"object"==typeof c&&(c=c.version),s!==c;case"":case"=":case"==":return e(s,c,p);case"!=":return t(s,c,p);case">":return r(s,c,p);case">=":return n(s,c,p);case"<":return o(s,c,p);case"<=":return i(s,c,p);default:throw new TypeError(`Invalid operator: ${a}`)}}}function rt(){if(ze)return Be;ze=1;const e=/\s+/g;class t{constructor(r,i){if(i=n(i),r instanceof t)return r.loose===!!i.loose&&r.includePrerelease===!!i.includePrerelease?r:new t(r.raw,i);if(r instanceof o)return this.raw=r.value,this.set=[[r]],this.formatted=void 0,this;if(this.options=i,this.loose=!!i.loose,this.includePrerelease=!!i.includePrerelease,this.raw=r.trim().replace(e," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!d(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&E(e[0])){this.set=[e];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&h)|(this.options.loose&&f))+":"+e,n=r.get(t);if(n)return n;const s=this.options.loose,E=s?a[c.HYPHENRANGELOOSE]:a[c.HYPHENRANGE];e=e.replace(E,T(this.options.includePrerelease)),i("hyphen replace",e),e=e.replace(a[c.COMPARATORTRIM],p),i("comparator trim",e),e=e.replace(a[c.TILDETRIM],l),i("tilde trim",e),e=e.replace(a[c.CARETTRIM],u),i("caret trim",e);let m=e.split(" ").map((e=>v(e,this.options))).join(" ").split(/\s+/).map((e=>L(e,this.options)));s&&(m=m.filter((e=>(i("loose invalid filter",e,this.options),!!e.match(a[c.COMPARATORLOOSE]))))),i("range list",m);const g=new Map,w=m.map((e=>new o(e,this.options)));for(const e of w){if(d(e))return[e];g.set(e.value,e)}g.size>1&&g.has("")&&g.delete("");const O=[...g.values()];return r.set(t,O),O}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some((t=>m(t,r)&&e.set.some((e=>m(e,r)&&t.every((t=>e.every((e=>t.intersects(e,r)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new s(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(y(this.set[t],e,this.options))return!0;return!1}}Be=t;const r=new(he?ue:(he=1,ue=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}})),n=ve(),o=function(){if(He)return Ve;He=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(n,o){if(o=r(o),n instanceof t){if(n.loose===!!o.loose)return n;n=n.value}n=n.trim().split(/\s+/).join(" "),s("comparator",n,o),this.options=o,this.loose=!!o.loose,this.parse(n),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(t){const r=this.options.loose?n[o.COMPARATORLOOSE]:n[o.COMPARATOR],i=t.match(r);if(!i)throw new TypeError(`Invalid comparator: ${t}`);this.operator=void 0!==i[1]?i[1]:"","="===this.operator&&(this.operator=""),i[2]?this.semver=new a(i[2],this.options.loose):this.semver=e}toString(){return this.value}test(t){if(s("Comparator.test",t,this.options.loose),this.semver===e||t===e)return!0;if("string"==typeof t)try{t=new a(t,this.options)}catch(e){return!1}return i(t,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new c(e.value,n).test(this.value):""===e.operator?""===e.value||new c(this.value,n).test(e.semver):!((n=r(n)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!e.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!e.operator.startsWith("<"))&&(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))&&!(i(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))&&!(i(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}Ve=t;const r=ve(),{safeRe:n,t:o}=Ke(),i=tt(),s=Qe(),a=Ze(),c=rt();return Ve}(),i=Qe(),s=Ze(),{safeRe:a,t:c,comparatorTrimReplace:p,tildeTrimReplace:l,caretTrimReplace:u}=Ke(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:f}=qe(),d=e=>"<0.0.0-0"===e.value,E=e=>""===e.value,m=(e,t)=>{let r=!0;const n=e.slice();let o=n.pop();for(;r&&n.length;)r=n.every((e=>o.intersects(e,t))),o=n.pop();return r},v=(e,t)=>(i("comp",e,t),e=I(e,t),i("caret",e),e=w(e,t),i("tildes",e),e=$(e,t),i("xrange",e),e=N(e,t),i("stars",e),e),g=e=>!e||"x"===e.toLowerCase()||"*"===e,w=(e,t)=>e.trim().split(/\s+/).map((e=>O(e,t))).join(" "),O=(e,t)=>{const r=t.loose?a[c.TILDELOOSE]:a[c.TILDE];return e.replace(r,((t,r,n,o,s)=>{let a;return i("tilde",e,t,r,n,o,s),g(r)?a="":g(n)?a=`>=${r}.0.0 <${+r+1}.0.0-0`:g(o)?a=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:s?(i("replaceTilde pr",s),a=`>=${r}.${n}.${o}-${s} <${r}.${+n+1}.0-0`):a=`>=${r}.${n}.${o} <${r}.${+n+1}.0-0`,i("tilde return",a),a}))},I=(e,t)=>e.trim().split(/\s+/).map((e=>R(e,t))).join(" "),R=(e,t)=>{i("caret",e,t);const r=t.loose?a[c.CARETLOOSE]:a[c.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,o,s,a)=>{let c;return i("caret",e,t,r,o,s,a),g(r)?c="":g(o)?c=`>=${r}.0.0${n} <${+r+1}.0.0-0`:g(s)?c="0"===r?`>=${r}.${o}.0${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.0${n} <${+r+1}.0.0-0`:a?(i("replaceCaret pr",a),c="0"===r?"0"===o?`>=${r}.${o}.${s}-${a} <${r}.${o}.${+s+1}-0`:`>=${r}.${o}.${s}-${a} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${s}-${a} <${+r+1}.0.0-0`):(i("no pr"),c="0"===r?"0"===o?`>=${r}.${o}.${s}${n} <${r}.${o}.${+s+1}-0`:`>=${r}.${o}.${s}${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${s} <${+r+1}.0.0-0`),i("caret return",c),c}))},$=(e,t)=>(i("replaceXRanges",e,t),e.split(/\s+/).map((e=>A(e,t))).join(" ")),A=(e,t)=>{e=e.trim();const r=t.loose?a[c.XRANGELOOSE]:a[c.XRANGE];return e.replace(r,((r,n,o,s,a,c)=>{i("xRange",e,r,n,o,s,a,c);const p=g(o),l=p||g(s),u=l||g(a),h=u;return"="===n&&h&&(n=""),c=t.includePrerelease?"-0":"",p?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&h?(l&&(s=0),a=0,">"===n?(n=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):"<="===n&&(n="<",l?o=+o+1:s=+s+1),"<"===n&&(c="-0"),r=`${n+o}.${s}.${a}${c}`):l?r=`>=${o}.0.0${c} <${+o+1}.0.0-0`:u&&(r=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),i("xRange return",r),r}))},N=(e,t)=>(i("replaceStars",e,t),e.trim().replace(a[c.STAR],"")),L=(e,t)=>(i("replaceGTE0",e,t),e.trim().replace(a[t.includePrerelease?c.GTE0PRE:c.GTE0],"")),T=e=>(t,r,n,o,i,s,a,c,p,l,u,h)=>`${r=g(n)?"":g(o)?`>=${n}.0.0${e?"-0":""}`:g(i)?`>=${n}.${o}.0${e?"-0":""}`:s?`>=${r}`:`>=${r}${e?"-0":""}`} ${c=g(p)?"":g(l)?`<${+p+1}.0.0-0`:g(u)?`<${p}.${+l+1}.0-0`:h?`<=${p}.${l}.${u}-${h}`:e?`<${p}.${l}.${+u+1}-0`:`<=${c}`}`.trim(),y=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(i(e[r].semver),e[r].semver!==o.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0};return Be}var nt=function(){if(Je)return We;Je=1;const e=rt();return We=(t,r,n)=>{try{r=new e(r,n)}catch(e){return!1}return r.test(t)},We}(),ot=me(nt);var it='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus-within summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: "";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n';function st(e,...t){for(const r of t)at(e,r);return e}function at(e,t){for(const r of Object.keys(t))s(e,r,t[r],!0)}const ct="7.0.2",pt=t;let lt=c;const ut="undefined"!=typeof window?window:void 0;void 0===lt&&ut?.vl?.compile&&(lt=ut.vl);const ht={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},ft={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},dt={vega:"Vega","vega-lite":"Vega-Lite"},Et={vega:pt.version,"vega-lite":lt?lt.version:"not available"},mt={vega:e=>e,"vega-lite":(e,t)=>lt.compile(e,{config:t}).spec},vt='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',gt="chart-wrapper";function wt(e,t,r,n){const o=`<html><head>${t}</head><body><pre><code class="json">`,i=`</code></pre>${r}</body></html>`,s=window.open("");s.document.write(o+e+i),s.document.title=`${dt[n]} JSON Source`}function Ot(e,t){if(e.$schema){const r=p(e.$schema);t&&t!==r.library&&console.warn(`The given visualization spec is written in ${dt[r.library]}, but mode argument sets ${dt[t]??t}.`);const n=r.library;return ot(Et[n],`^${r.version.slice(1)}`)||console.warn(`The input spec uses ${dt[n]} ${r.version}, but the current version of ${dt[n]} is v${Et[n]}.`),n}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function It(e){return!(!e||!("load"in e))}function Rt(e){return It(e)?e:pt.loader(e)}async function $t(t,s,c={}){let h,f;r(s)?(f=Rt(c.loader),h=JSON.parse(await f.load(s))):h=s;const d=function(e){const t=e.usermeta?.embedOptions??{};return r(t.defaultStyle)&&(t.defaultStyle=!1),t}(h),E=d.loader;f&&!E||(f=Rt(c.loader??E));const m=await At(d,f),v=await At(c,f),g={...st(v,m),config:n(v.config??{},m.config??{})};return await async function(t,r,s={},c){const h=s.theme?n(l[s.theme],s.config??{}):s.config,f=o(s.actions)?s.actions:st({},ht,s.actions??{}),d={...ft,...s.i18n},E=s.renderer??"svg",m=s.logLevel??pt.Warn,v=s.downloadFileName??"visualization",g="string"==typeof t?document.querySelector(t):t;if(!g)throw new Error(`${t} does not exist`);if(!1!==s.defaultStyle){const e="vega-embed-style",{root:t,rootContainer:r}=function(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}(g);if(!t.getElementById(e)){const t=document.createElement("style");t.id=e,t.innerHTML=void 0===s.defaultStyle||!0===s.defaultStyle?it.toString():s.defaultStyle,r.appendChild(t)}}const w=Ot(r,s.mode);let O=mt[w](r,h);if("vega-lite"===w&&O.$schema){const e=p(O.$schema);ot(Et.vega,`^${e.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${e.version}, but current version is v${Et.vega}.`)}g.classList.add("vega-embed"),f&&g.classList.add("has-actions");g.innerHTML="";let I=g;if(f){const e=document.createElement("div");e.classList.add(gt),g.appendChild(e),I=e}const R=s.patch;R&&(O=R instanceof Function?R(O):te(O,R,!0,!1).newDocument);s.formatLocale&&pt.formatLocale(s.formatLocale);s.timeFormatLocale&&pt.timeFormatLocale(s.timeFormatLocale);if(s.expressionFunctions)for(const e in s.expressionFunctions){const t=s.expressionFunctions[e];"fn"in t?pt.expressionFunction(e,t.fn,t.visitor):t instanceof Function&&pt.expressionFunction(e,t)}const{ast:$}=s,A=pt.parse(O,"vega-lite"===w?{}:h,{ast:$}),N=new(s.viewClass||pt.View)(A,{loader:c,logLevel:m,renderer:E,...$?{expr:pt.expressionInterpreter??s.expr??a}:{}});if(N.addSignalListener("autosize",((e,t)=>{const{type:r}=t;"fit-x"==r?(I.classList.add("fit-x"),I.classList.remove("fit-y")):"fit-y"==r?(I.classList.remove("fit-x"),I.classList.add("fit-y")):"fit"==r?I.classList.add("fit-x","fit-y"):I.classList.remove("fit-x","fit-y")})),!1!==s.tooltip){const{loader:e,tooltip:t}=s,r=e&&!It(e)?e?.baseURL:void 0,n="function"==typeof t?t:new u({baseURL:r,...!0===t?{}:t}).call;N.tooltip(n)}let L,{hover:T}=s;void 0===T&&(T="vega"===w);if(T){const{hoverSet:e,updateSet:t}="boolean"==typeof T?{}:T;N.hover(e,t)}s&&(null!=s.width&&N.width(s.width),null!=s.height&&N.height(s.height),null!=s.padding&&N.padding(s.padding));if(await N.initialize(I,s.bind).runAsync(),!1!==f){let t=g;if(!1!==s.defaultStyle||s.forceActionsMenu){const e=document.createElement("details");e.title=d.CLICK_TO_VIEW_ACTIONS,g.append(e),t=e;const r=document.createElement("summary");r.innerHTML=vt,e.append(r),L=t=>{e.contains(t.target)||e.removeAttribute("open")},document.addEventListener("click",L)}const n=document.createElement("div");if(t.append(n),n.classList.add("vega-actions"),!0===f||!1!==f.export)for(const e of["svg","png"])if(!0===f||!0===f.export||f.export[e]){const t=d[`${e.toUpperCase()}_ACTION`],r=document.createElement("a"),o=i(s.scaleFactor)?s.scaleFactor[e]:s.scaleFactor;r.text=t,r.href="#",r.target="_blank",r.download=`${v}.${e}`,r.addEventListener("mousedown",(async function(t){t.preventDefault();const r=await N.toImageURL(e,o);this.href=r})),n.append(r)}if(!0===f||!1!==f.source){const t=document.createElement("a");t.text=d.SOURCE_ACTION,t.href="#",t.addEventListener("click",(function(t){wt(e(r),s.sourceHeader??"",s.sourceFooter??"",w),t.preventDefault()})),n.append(t)}if("vega-lite"===w&&(!0===f||!1!==f.compiled)){const t=document.createElement("a");t.text=d.COMPILED_ACTION,t.href="#",t.addEventListener("click",(function(t){wt(e(O),s.sourceHeader??"",s.sourceFooter??"","vega"),t.preventDefault()})),n.append(t)}if(!0===f||!1!==f.editor){const t=s.editorUrl??"https://vega.github.io/editor/",o=document.createElement("a");o.text=d.EDITOR_ACTION,o.href="#",o.addEventListener("click",(function(n){!function(e,t,r){const n=e.open(t),{origin:o}=new URL(t);let i=40;e.addEventListener("message",(function t(r){r.source===n&&(i=0,e.removeEventListener("message",t,!1))}),!1),setTimeout((function e(){i<=0||(n.postMessage(r,o),setTimeout(e,250),i-=1)}),250)}(window,t,{config:h,mode:R?"vega":w,renderer:E,spec:e(R?O:r)}),n.preventDefault()})),n.append(o)}}function y(){L&&document.removeEventListener("click",L),N.finalize()}return{view:N,spec:r,vgSpec:O,finalize:y,embedOptions:s}}(t,h,g,f)}async function At(e,t){const n=r(e.config)?JSON.parse(await t.load(e.config)):e.config??{},o=r(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...o?{patch:o}:{},...n?{config:n}:{}}}export{ht as DEFAULT_ACTIONS,$t as default,Ot as guessMode,pt as vega,lt as vegaLite,ct as version};
//# sourceMappingURL=/sm/426a0239eb47335999751bec7b633450aa22307353592cd76db9cf50e746cfa5.map