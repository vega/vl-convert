/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/vega-scale@8.0.0/build/vega-scale.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{peek as e,constant as c,isNumber as a,span as f,isObject as n,isString as d,error as t,toSet as b,array as r,isArray as o,toNumber as i}from"/npm/vega-util@2.0.0/+esm";import{bisectRight as l,range as u,bisect as s}from"/npm/d3-array@3.2.4/+esm";import*as m from"/npm/d3-scale@4.0.2/+esm";import{scaleOrdinal as g,tickFormat as p}from"/npm/d3-scale@4.0.2/+esm";export{scaleImplicit}from"/npm/d3-scale@4.0.2/+esm";import*as h from"/npm/d3-interpolate@3.0.1/+esm";import{schemeAccent as y,schemeCategory10 as v,schemeDark2 as w,schemeObservable10 as $,schemePaired as M,schemePastel1 as x,schemePastel2 as S,schemeSet1 as q,schemeSet2 as G,schemeSet3 as k}from"/npm/d3-scale-chromatic@3.1.0/+esm";import{timeInterval as B,utcInterval as O}from"/npm/vega-time@3.0.0/+esm";function R(e,c,a){const f=e-c+2*a;return e?f>0?f:1:0}const F="identity",A="linear",I="log",L="pow",T="sqrt",D="symlog",P="time",Y="utc",j="sequential",C="diverging",E="quantile",z="quantize",U="threshold",N="ordinal",Q="point",X="band",_="bin-ordinal",H="continuous",J="discrete",K="discretizing",V="interpolating",W="temporal";function Z(){const e=g().unknown(void 0),c=e.domain,a=e.range;let f,n,d=[0,1],t=!1,b=0,r=0,o=.5;function i(){const e=c().length,i=d[1]<d[0],l=d[1-i],s=R(e,b,r);let m=d[i-0];f=(l-m)/(s||1),t&&(f=Math.floor(f)),m+=(l-m-f*(e-b))*o,n=f*(1-b),t&&(m=Math.round(m),n=Math.round(n));const g=u(e).map((e=>m+f*e));return a(i?g.reverse():g)}return delete e.unknown,e.domain=function(e){return arguments.length?(c(e),i()):c()},e.range=function(e){return arguments.length?(d=[+e[0],+e[1]],i()):d.slice()},e.rangeRound=function(e){return d=[+e[0],+e[1]],t=!0,i()},e.bandwidth=function(){return n},e.step=function(){return f},e.round=function(e){return arguments.length?(t=!!e,i()):t},e.padding=function(e){return arguments.length?(r=Math.max(0,Math.min(1,e)),b=r,i()):b},e.paddingInner=function(e){return arguments.length?(b=Math.max(0,Math.min(1,e)),i()):b},e.paddingOuter=function(e){return arguments.length?(r=Math.max(0,Math.min(1,e)),i()):r},e.align=function(e){return arguments.length?(o=Math.max(0,Math.min(1,e)),i()):o},e.invertRange=function(e){if(null==e[0]||null==e[1])return;const f=d[1]<d[0],t=f?a().reverse():a(),b=t.length-1;let r,o,i,u=+e[0],s=+e[1];return u!=u||s!=s||(s<u&&(i=u,u=s,s=i),s<t[0]||u>d[1-f])?void 0:(r=Math.max(0,l(t,u)-1),o=u===s?r:l(t,s)-1,u-t[r]>n+1e-10&&++r,f&&(i=r,r=b-o,o=b-i),r>o?void 0:c().slice(r,o+1))},e.invert=function(c){const a=e.invertRange([c,c]);return a?a[0]:a},e.copy=function(){return Z().domain(c()).range(d).round(t).paddingInner(b).paddingOuter(r).align(o)},i()}function ee(e){const c=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return ee(c())},e}var ce=Array.prototype.map;const ae=Array.prototype.slice;const fe=new Map,ne=Symbol("vega_scale");function de(e){return e[ne]=!0,e}function te(e){return e&&!0===e[ne]}function be(e,c,a){return arguments.length>1?(fe.set(e,function(e,c,a){const f=function(){const a=c();return a.invertRange||(a.invertRange=a.invert?function(e){return function(c){let a,f=c[0],n=c[1];return n<f&&(a=f,f=n,n=a),[e.invert(f),e.invert(n)]}}(a):a.invertExtent?function(e){return function(c){const a=e.range();let f,n,d,t,b=c[0],r=c[1],o=-1;for(r<b&&(n=b,b=r,r=n),d=0,t=a.length;d<t;++d)a[d]>=b&&a[d]<=r&&(o<0&&(o=d),f=d);if(!(o<0))return b=e.invertExtent(a[o]),r=e.invertExtent(a[f]),[void 0===b[0]?b[1]:b[0],void 0===r[1]?r[0]:r[1]]}}(a):void 0),a.type=e,de(a)};return f.metadata=b(r(a)),f}(e,c,a)),this):re(e)?fe.get(e):void 0}function re(e){return fe.has(e)}function oe(e,c){const a=fe.get(e);return a&&a.metadata[c]}function ie(e){return oe(e,H)}function le(e){return oe(e,J)}function ue(e){return oe(e,K)}function se(e){return oe(e,I)}function me(e){return oe(e,W)}function ge(e){return oe(e,V)}function pe(e){return oe(e,E)}be(F,m.scaleIdentity),be(A,m.scaleLinear,H),be(I,m.scaleLog,[H,I]),be(L,m.scalePow,H),be(T,m.scaleSqrt,H),be(D,m.scaleSymlog,H),be(P,m.scaleTime,[H,W]),be(Y,m.scaleUtc,[H,W]),be(j,m.scaleSequential,[H,V]),be(`${j}-${A}`,m.scaleSequential,[H,V]),be(`${j}-${I}`,m.scaleSequentialLog,[H,V,I]),be(`${j}-${L}`,m.scaleSequentialPow,[H,V]),be(`${j}-${T}`,m.scaleSequentialSqrt,[H,V]),be(`${j}-${D}`,m.scaleSequentialSymlog,[H,V]),be(`${C}-${A}`,m.scaleDiverging,[H,V]),be(`${C}-${I}`,m.scaleDivergingLog,[H,V,I]),be(`${C}-${L}`,m.scaleDivergingPow,[H,V]),be(`${C}-${T}`,m.scaleDivergingSqrt,[H,V]),be(`${C}-${D}`,m.scaleDivergingSymlog,[H,V]),be(E,m.scaleQuantile,[K,E]),be(z,m.scaleQuantize,K),be(U,m.scaleThreshold,K),be(_,(function c(){let a=[],f=[];function n(e){return null==e||e!=e?void 0:f[(s(a,e)-1)%f.length]}return n.domain=function(e){return arguments.length?(a=function(e){return ce.call(e,i)}(e),n):a.slice()},n.range=function(e){return arguments.length?(f=ae.call(e),n):f.slice()},n.tickFormat=function(c,f){return p(a[0],e(a),null==c?10:c,f)},n.copy=function(){return c().domain(n.domain()).range(n.range())},n}),[J,K]),be(N,m.scaleOrdinal,J),be(X,Z,J),be(Q,(function(){return ee(Z().paddingInner(1))}),J);const he=["clamp","base","constant","exponent"];function ye(c,a){const f=a[0],n=e(a)-f;return function(e){return c(f+e*n)}}function ve(e,c,a){return h.piecewise(xe(c||"rgb",a),e)}function we(e,c){const a=new Array(c),f=c+1;for(let n=0;n<c;)a[n]=e(++n/f);return a}function $e(e){const c=e.type,a=e.copy();return a.type=c,a}function Me(e,a,f){const n=f-a;let d,t,b;return n&&Number.isFinite(n)?(d=(t=e.type).indexOf("-"),t=d<0?t:t.slice(d+1),b=be(t)().domain([a,f]).range([0,1]),he.forEach((c=>e[c]?b[c](e[c]()):0)),b):c(.5)}function xe(e,c){const a=h[function(e){return"interpolate"+e.toLowerCase().split("-").map((e=>e[0].toUpperCase()+e.slice(1))).join("")}(e)];return null!=c&&a&&a.gamma?a.gamma(c):a}function Se(e){if(o(e))return e;const c=e.length/6|0,a=new Array(c);for(let f=0;f<c;)a[f]="#"+e.slice(6*f,6*++f);return a}function qe(e,c){for(const a in e)ke(a,c(e[a]))}const Ge={};function ke(e,c){return e=e&&e.toLowerCase(),arguments.length>1?(Ge[e]=c,this):Ge[e]}qe({accent:y,category10:v,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:w,observable10:$,paired:M,pastel1:x,pastel2:S,set1:q,set2:G,set3:k,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"},Se),qe({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(e=>ve(Se(e))));const Be="symbol",Oe="discrete",Re="gradient",Fe=e=>o(e)?e.map((e=>String(e))):String(e),Ae=(e,c)=>e[1]-c[1],Ie=(e,c)=>c[1]-e[1];function Le(e,c,b){let r;return a(c)&&(e.bins&&(c=Math.max(c,e.bins.length)),null!=b&&(c=Math.min(c,Math.floor(f(e.domain())/b||1)+1))),n(c)&&(r=c.step,c=c.interval),d(c)&&(c=e.type===P?B(c):e.type==Y?O(c):t("Only time and utc scales accept interval strings."),r&&(c=c.every(r))),c}function Te(c,a,f){let n=c.range(),d=n[0],t=e(n),b=Ae;if(d>t&&(n=t,t=d,d=n,b=Ie),d=Math.floor(d),t=Math.ceil(t),a=a.map((e=>[e,c(e)])).filter((e=>d<=e[1]&&e[1]<=t)).sort(b).map((e=>e[0])),f>0&&a.length>1){const c=[a[0],e(a)];for(;a.length>f&&a.length>=3;)a=a.filter(((e,c)=>!(c%2)));a.length<3&&(a=c)}return a}function De(e,c){return e.bins?Te(e,e.bins,c):e.ticks?e.ticks(c):e.domain()}function Pe(e,c,a,f,n,d){const t=c.type;let b=Fe;if(t===P||n===P)b=e.timeFormat(f);else if(t===Y||n===Y)b=e.utcFormat(f);else if(se(t)){const n=e.formatFloat(f);if(d||c.bins)b=n;else{const e=Ye(c,a,!1);b=c=>e(c)?n(c):""}}else if(c.tickFormat){const n=c.domain();b=e.formatSpan(n[0],n[n.length-1],a,f)}else f&&(b=e.format(f));return b}function Ye(e,c,a){const f=De(e,c),n=e.base(),d=Math.log(n),t=Math.max(1,n*c/f.length),b=e=>{let c=e/Math.pow(n,Math.round(Math.log(e)/d));return c*n<n-.5&&(c*=n),c<=t};return a?f.filter(b):b}const je={[E]:"quantiles",[z]:"thresholds",[U]:"domain"},Ce={[E]:"quantiles",[z]:"domain"};function Ee(c,a){return c.bins?function(c){const a=c.slice(0,-1);return a.max=e(c),a}(c.bins):c.type===I?Ye(c,a,!0):je[c.type]?function(e){const c=[-1/0].concat(e);return c.max=1/0,c}(c[je[c.type]]()):De(c,a)}function ze(e,c,a,f,n,d,t){const b=Ce[c.type]&&d!==P&&d!==Y?function(e,c,a){const f=c[Ce[c.type]](),n=f.length;let d,t=n>1?f[1]-f[0]:f[0];for(d=1;d<n;++d)t=Math.min(t,f[d]-f[d-1]);return e.formatSpan(0,t,30,a)}(e,c,n):Pe(e,c,a,n,d,t);return f===Be&&(e=>je[e.type]||e.bins)(c)?Ue(b):f===Oe?Qe(b):Xe(b)}const Ue=e=>(c,a,f)=>{const n=Ne(f[a+1],Ne(f.max,1/0)),d=_e(c,e),t=_e(n,e);return d&&t?d+" – "+t:t?"< "+t:"≥ "+d},Ne=(e,c)=>null!=e?e:c,Qe=e=>(c,a)=>a?e(c):null,Xe=e=>c=>e(c),_e=(e,c)=>Number.isFinite(e)?c(e):null;function He(c){const a=c.domain(),f=a.length-1;let n=+a[0],d=+e(a),t=d-n;if(c.type===U){const e=f?t/f:.1;n-=e,d+=e,t=d-n}return e=>(e-n)/t}function Je(c,a,f){f=f||{};const n=Math.max(3,f.maxlen||7),t=function(e,c,a,f){const n=f||c.type;return d(a)&&me(n)&&(a=a.replace(/%a/g,"%A").replace(/%b/g,"%B")),a||n!==P?a||n!==Y?ze(e,c,5,null,a,f,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}(c,a,f.format,f.formatType);if(ue(a.type)){const e=Ee(a).slice(1).map(t),c=e.length;return`${c} boundar${1===c?"y":"ies"}: ${e.join(", ")}`}if(le(a.type)){const e=a.domain(),c=e.length;return`${c} value${1===c?"":"s"}: ${c>n?e.slice(0,n-2).map(t).join(", ")+", ending with "+e.slice(-1).map(t):e.map(t).join(", ")}`}{const c=a.domain();return`values from ${t(c[0])} to ${t(e(c))}`}}export{X as Band,_ as BinOrdinal,Oe as DiscreteLegend,C as Diverging,Re as GradientLegend,F as Identity,A as Linear,I as Log,N as Ordinal,Q as Point,L as Pow,E as Quantile,z as Quantize,j as Sequential,T as Sqrt,Be as SymbolLegend,D as Symlog,U as Threshold,P as Time,Y as UTC,R as bandSpace,Je as domainCaption,xe as interpolate,ve as interpolateColors,ye as interpolateRange,ie as isContinuous,le as isDiscrete,ue as isDiscretizing,ge as isInterpolating,se as isLogarithmic,pe as isQuantile,te as isRegisteredScale,me as isTemporal,re as isValidScaleType,ze as labelFormat,He as labelFraction,Ee as labelValues,we as quantizeInterpolator,de as registerScale,be as scale,$e as scaleCopy,Me as scaleFraction,ke as scheme,Le as tickCount,Pe as tickFormat,De as tickValues,Te as validTicks};export default null;
//# sourceMappingURL=/sm/d2ae22a90ba9600d073a1a903748cad02e0402966d9e2f7bdd4c3d1bb7711259.map