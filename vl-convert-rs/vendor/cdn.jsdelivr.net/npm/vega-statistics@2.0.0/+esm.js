/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/vega-statistics@2.0.0/build/vega-statistics.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{ascending as t,quantileSorted as n,deviation as e,quantile as r,median as o}from"/npm/d3-array@3.2.4/+esm";function*l(t,n){if(null==n)for(let n of t)null!=n&&""!==n&&(n=+n)>=n&&(yield n);else{let e=-1;for(let r of t)r=n(r,++e,t),null!=r&&""!==r&&(r=+r)>=r&&(yield r)}}function u(e,r,o){const u=Float64Array.from(l(e,o));return u.sort(t),r.map((t=>n(u,t)))}function a(t,n){return u(t,[.25,.5,.75],n)}function f(t,n){const r=t.length,o=e(t,n),l=a(t,n),u=(l[2]-l[0])/1.34;return 1.06*(Math.min(o,u)||o||Math.abs(l[0])||1)*Math.pow(r,-.2)}function s(t){const n=t.maxbins||20,e=t.base||10,r=Math.log(e),o=t.divide||[5,2];let l,u,a,f,s,c,i=t.extent[0],h=t.extent[1];const d=t.span||h-i||Math.abs(i)||1;if(t.step)l=t.step;else if(t.steps){for(f=d/n,s=0,c=t.steps.length;s<c&&t.steps[s]<f;++s);l=t.steps[Math.max(0,s-1)]}else{for(u=Math.ceil(Math.log(n)/r),a=t.minstep||0,l=Math.max(a,Math.pow(e,Math.round(Math.log(d)/r)-u));Math.ceil(d/l)>n;)l*=e;for(s=0,c=o.length;s<c;++s)f=l/o[s],f>=a&&d/f<=n&&(l=f)}f=Math.log(l);const p=f>=0?0:1+~~(-f/r),M=Math.pow(e,-p-1);return(t.nice||void 0===t.nice)&&(f=Math.floor(i/l+M)*l,i=i<f?f-l:f,h=Math.ceil(h/l)*l),{start:i,stop:h===i?i+l:h,step:l}}var c=Math.random;function i(t){c=t}function h(n,e,o,u){if(!n.length)return[void 0,void 0];const a=Float64Array.from(l(n,u)),f=a.length,s=e;let i,h,d,p;for(d=0,p=Array(s);d<s;++d){for(i=0,h=0;h<f;++h)i+=a[~~(c()*f)];p[d]=i/f}return p.sort(t),[r(p,o/2),r(p,1-o/2)]}function d(t,n,e,r){r=r||(t=>t);const o=t.length,l=new Float64Array(o);let u,a=0,f=1,s=r(t[0]),c=s,i=s+n;for(;f<o;++f){if(u=r(t[f]),u>=i){for(c=(s+c)/2;a<f;++a)l[a]=c;i=u+n,s=u}c=u}for(c=(s+c)/2;a<f;++a)l[a]=c;return e?function(t,n){const e=t.length;let r,o,l=0,u=1;for(;t[l]===t[u];)++u;for(;u<e;){for(r=u+1;t[u]===t[r];)++r;if(t[u]-t[u-1]<n){for(o=u+(l+r-u-u>>1);o<u;)t[o++]=t[u];for(;o>u;)t[o--]=t[l]}l=u,u=r}return t}(l,n+n/4):l}function p(t){return function(){return(t=(1103515245*t+12345)%2147483647)/2147483647}}function M(t,n){let e,r,o;null==n&&(n=t,t=0);const l={min(t){return arguments.length?(e=t||0,o=r-e,l):e},max(t){return arguments.length?(r=t||0,o=r-e,l):r},sample:()=>e+Math.floor(o*c()),pdf:t=>t===Math.floor(t)&&t>=e&&t<r?1/o:0,cdf(t){const n=Math.floor(t);return n<e?0:n>=r?1:(n-e+1)/o},icdf:t=>t>=0&&t<=1?e-1+Math.floor(t*o):NaN};return l.min(t).max(n)}const g=Math.sqrt(2*Math.PI),m=Math.SQRT2;let w=NaN;function x(t,n){t=t||0,n=null==n?1:n;let e,r,o=0,l=0;if(w==w)o=w,w=NaN;else{do{o=2*c()-1,l=2*c()-1,e=o*o+l*l}while(0===e||e>1);r=Math.sqrt(-2*Math.log(e)/e),o*=r,w=l*r}return t+o*n}function b(t,n,e){const r=(t-(n||0))/(e=null==e?1:e);return Math.exp(-.5*r*r)/(e*g)}function N(t,n,e){const r=(t-(n=n||0))/(e=null==e?1:e),o=Math.abs(r);let l;if(o>37)l=0;else{const t=Math.exp(-o*o/2);let n;o<7.07106781186547?(n=.0352624965998911*o+.700383064443688,n=n*o+6.37396220353165,n=n*o+33.912866078383,n=n*o+112.079291497871,n=n*o+221.213596169931,n=n*o+220.206867912376,l=t*n,n=.0883883476483184*o+1.75566716318264,n=n*o+16.064177579207,n=n*o+86.7807322029461,n=n*o+296.564248779674,n=n*o+637.333633378831,n=n*o+793.826512519948,n=n*o+440.413735824752,l/=n):(n=o+.65,n=o+4/n,n=o+3/n,n=o+2/n,n=o+1/n,l=t/n/2.506628274631)}return r>0?1-l:l}function y(t,n,e){return t<0||t>1?NaN:(n||0)+(null==e?1:e)*m*function(t){let n,e=-Math.log((1-t)*(1+t));e<6.25?(e-=3.125,n=-364441206401782e-35,n=n*e-16850591381820166e-35,n=128584807152564e-32+n*e,n=11157877678025181e-33+n*e,n=n*e-1333171662854621e-31,n=20972767875968562e-33+n*e,n=6637638134358324e-30+n*e,n=n*e-4054566272975207e-29,n=n*e-8151934197605472e-29,n=26335093153082323e-28+n*e,n=n*e-12975133253453532e-27,n=n*e-5415412054294628e-26,n=1.0512122733215323e-9+n*e,n=n*e-4.112633980346984e-9,n=n*e-2.9070369957882005e-8,n=4.2347877827932404e-7+n*e,n=n*e-13654692000834679e-22,n=n*e-13882523362786469e-21,n=.00018673420803405714+n*e,n=n*e-.000740702534166267,n=n*e-.006033670871430149,n=.24015818242558962+n*e,n=1.6536545626831027+n*e):e<16?(e=Math.sqrt(e)-3.25,n=2.2137376921775787e-9,n=9.075656193888539e-8+n*e,n=n*e-2.7517406297064545e-7,n=1.8239629214389228e-8+n*e,n=15027403968909828e-22+n*e,n=n*e-4013867526981546e-21,n=29234449089955446e-22+n*e,n=12475304481671779e-21+n*e,n=n*e-47318229009055734e-21,n=6828485145957318e-20+n*e,n=24031110387097894e-21+n*e,n=n*e-.0003550375203628475,n=.0009532893797373805+n*e,n=n*e-.0016882755560235047,n=.002491442096107851+n*e,n=n*e-.003751208507569241,n=.005370914553590064+n*e,n=1.0052589676941592+n*e,n=3.0838856104922208+n*e):Number.isFinite(e)?(e=Math.sqrt(e)-5,n=-27109920616438573e-27,n=n*e-2.555641816996525e-10,n=1.5076572693500548e-9+n*e,n=n*e-3.789465440126737e-9,n=7.61570120807834e-9+n*e,n=n*e-1.496002662714924e-8,n=2.914795345090108e-8+n*e,n=n*e-6.771199775845234e-8,n=2.2900482228026655e-7+n*e,n=n*e-9.9298272942317e-7,n=4526062597223154e-21+n*e,n=n*e-1968177810553167e-20,n=7599527703001776e-20+n*e,n=n*e-.00021503011930044477,n=n*e-.00013871931833623122,n=1.0103004648645344+n*e,n=4.849906401408584+n*e):n=1/0;return n*t}(2*t-1)}function q(t,n){let e,r;const o={mean(t){return arguments.length?(e=t||0,o):e},stdev(t){return arguments.length?(r=null==t?1:t,o):r},sample:()=>x(e,r),pdf:t=>b(t,e,r),cdf:t=>N(t,e,r),icdf:t=>y(t,e,r)};return o.mean(t).stdev(n)}function A(t,n){const e=q();let r=0;const o={data(e){return arguments.length?(t=e,r=e?e.length:0,o.bandwidth(n)):t},bandwidth(e){return arguments.length?(!(n=e)&&t&&(n=f(t)),o):n},sample:()=>t[~~(c()*r)]+n*e.sample(),pdf(o){let l=0,u=0;for(;u<r;++u)l+=e.pdf((o-t[u])/n);return l/n/r},cdf(o){let l=0,u=0;for(;u<r;++u)l+=e.cdf((o-t[u])/n);return l/r},icdf(){throw Error("KDE icdf not supported.")}};return o.data(t)}function F(t,n){return t=t||0,n=null==n?1:n,Math.exp(t+x()*n)}function v(t,n,e){if(t<=0)return 0;n=n||0,e=null==e?1:e;const r=(Math.log(t)-n)/e;return Math.exp(-.5*r*r)/(e*g*t)}function S(t,n,e){return N(Math.log(t),n,e)}function E(t,n,e){return Math.exp(y(t,n,e))}function L(t,n){let e,r;const o={mean(t){return arguments.length?(e=t||0,o):e},stdev(t){return arguments.length?(r=null==t?1:t,o):r},sample:()=>F(e,r),pdf:t=>v(t,e,r),cdf:t=>S(t,e,r),icdf:t=>E(t,e,r)};return o.mean(t).stdev(n)}function P(t,n){let e,r=0;const o={weights(t){return arguments.length?(e=function(t){const n=[];let e,o=0;for(e=0;e<r;++e)o+=n[e]=null==t[e]?1:+t[e];for(e=0;e<r;++e)n[e]/=o;return n}(n=t||[]),o):n},distributions(e){return arguments.length?(e?(r=e.length,t=e):(r=0,t=[]),o.weights(n)):t},sample(){const n=c();let o=t[r-1],l=e[0],u=0;for(;u<r-1;l+=e[++u])if(n<l){o=t[u];break}return o.sample()},pdf(n){let o=0,l=0;for(;l<r;++l)o+=e[l]*t[l].pdf(n);return o},cdf(n){let o=0,l=0;for(;l<r;++l)o+=e[l]*t[l].cdf(n);return o},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(t).weights(n)}function k(t,n){return null==n&&(n=null==t?1:t,t=0),t+(n-t)*c()}function D(t,n,e){return null==e&&(e=null==n?1:n,n=0),t>=n&&t<=e?1/(e-n):0}function I(t,n,e){return null==e&&(e=null==n?1:n,n=0),t<n?0:t>e?1:(t-n)/(e-n)}function C(t,n,e){return null==e&&(e=null==n?1:n,n=0),t>=0&&t<=1?n+t*(e-n):NaN}function K(t,n){let e,r;const o={min(t){return arguments.length?(e=t||0,o):e},max(t){return arguments.length?(r=null==t?1:t,o):r},sample:()=>k(e,r),pdf:t=>D(t,e,r),cdf:t=>I(t,e,r),icdf:t=>C(t,e,r)};return null==n&&(n=null==t?1:t,t=0),o.min(t).max(n)}function Q(t,n,e){let r=0,o=0;for(const l of t){const t=e(l);null==n(l)||null==t||isNaN(t)||(r+=(t-r)/++o)}return{coef:[r],predict:()=>r,rSquared:0}}function R(t,n,e,r){const o=r-t*t,l=Math.abs(o)<1e-24?0:(e-t*n)/o;return[n-l*t,l]}function G(t,n,e,r){t=t.filter((t=>{let r=n(t),o=e(t);return null!=r&&(r=+r)>=r&&null!=o&&(o=+o)>=o})),r&&t.sort(((t,e)=>n(t)-n(e)));const o=t.length,l=new Float64Array(o),u=new Float64Array(o);let a,f,s,c=0,i=0,h=0;for(s of t)l[c]=a=+n(s),u[c]=f=+e(s),++c,i+=(a-i)/c,h+=(f-h)/c;for(c=0;c<o;++c)l[c]-=i,u[c]-=h;return[l,u,i,h]}function T(t,n,e,r){let o,l,u=-1;for(const a of t)o=n(a),l=e(a),null!=o&&(o=+o)>=o&&null!=l&&(l=+l)>=l&&r(o,l,++u)}function U(t,n,e,r,o){let l=0,u=0;return T(t,n,e,((t,n)=>{const e=n-o(t),a=n-r;l+=e*e,u+=a*a})),1-l/u}function j(t,n,e){let r=0,o=0,l=0,u=0,a=0;T(t,n,e,((t,n)=>{++a,r+=(t-r)/a,o+=(n-o)/a,l+=(t*n-l)/a,u+=(t*t-u)/a}));const f=R(r,o,l,u),s=t=>f[0]+f[1]*t;return{coef:f,predict:s,rSquared:U(t,n,e,o,s)}}function z(t,n,e){let r=0,o=0,l=0,u=0,a=0;T(t,n,e,((t,n)=>{++a,t=Math.log(t),r+=(t-r)/a,o+=(n-o)/a,l+=(t*n-l)/a,u+=(t*t-u)/a}));const f=R(r,o,l,u),s=t=>f[0]+f[1]*Math.log(t);return{coef:f,predict:s,rSquared:U(t,n,e,o,s)}}function B(t,n,e){const[r,o,l,u]=G(t,n,e);let a,f,s,c=0,i=0,h=0,d=0,p=0;T(t,n,e,((t,n)=>{a=r[p++],f=Math.log(n),s=a*n,c+=(n*f-c)/p,i+=(s-i)/p,h+=(s*f-h)/p,d+=(a*s-d)/p}));const[M,g]=R(i/u,c/u,h/u,d/u),m=t=>Math.exp(M+g*(t-l));return{coef:[Math.exp(M-g*l),g],predict:m,rSquared:U(t,n,e,u,m)}}function H(t,n,e){let r=0,o=0,l=0,u=0,a=0,f=0;T(t,n,e,((t,n)=>{const e=Math.log(t),s=Math.log(n);++f,r+=(e-r)/f,o+=(s-o)/f,l+=(e*s-l)/f,u+=(e*e-u)/f,a+=(n-a)/f}));const s=R(r,o,l,u),c=t=>s[0]*Math.pow(t,s[1]);return s[0]=Math.exp(s[0]),{coef:s,predict:c,rSquared:U(t,n,e,a,c)}}function J(t,n,e){const[r,o,l,u]=G(t,n,e),a=r.length;let f,s,c,i,h=0,d=0,p=0,M=0,g=0;for(f=0;f<a;)s=r[f],c=o[f++],i=s*s,h+=(i-h)/f,d+=(i*s-d)/f,p+=(i*i-p)/f,M+=(s*c-M)/f,g+=(i*c-g)/f;const m=p-h*h,w=h*m-d*d,x=(g*h-M*d)/w,b=(M*m-g*d)/w,N=-x*h,y=t=>x*(t-=l)*t+b*t+N+u;return{coef:[N-b*l+x*l*l+u,b-2*x*l,x],predict:y,rSquared:U(t,n,e,u,y)}}function O(t,n,e,r){if(0===r)return Q(t,n,e);if(1===r)return j(t,n,e);if(2===r)return J(t,n,e);const[o,l,u,a]=G(t,n,e),f=o.length,s=[],c=[],i=r+1;let h,d,p,M,g;for(h=0;h<i;++h){for(p=0,M=0;p<f;++p)M+=Math.pow(o[p],h)*l[p];for(s.push(M),g=new Float64Array(i),d=0;d<i;++d){for(p=0,M=0;p<f;++p)M+=Math.pow(o[p],h+d);g[d]=M}c.push(g)}c.push(s);const m=function(t){const n=t.length-1,e=[];let r,o,l,u,a;for(r=0;r<n;++r){for(u=r,o=r+1;o<n;++o)Math.abs(t[r][o])>Math.abs(t[r][u])&&(u=o);for(l=r;l<n+1;++l)a=t[l][r],t[l][r]=t[l][u],t[l][u]=a;for(o=r+1;o<n;++o)for(l=n;l>=r;l--)t[l][o]-=t[l][r]*t[r][o]/t[r][r]}for(o=n-1;o>=0;--o){for(a=0,l=o+1;l<n;++l)a+=t[l][o]*e[l];e[o]=(t[n][o]-a)/t[o][o]}return e}(c),w=t=>{t-=u;let n=a+m[0]+m[1]*t+m[2]*t*t;for(h=3;h<i;++h)n+=m[h]*Math.pow(t,h);return n};return{coef:V(i,m,-u,a),predict:w,rSquared:U(t,n,e,a,w)}}function V(t,n,e,r){const o=Array(t);let l,u,a,f;for(l=0;l<t;++l)o[l]=0;for(l=t-1;l>=0;--l)for(a=n[l],f=1,o[l]+=a,u=1;u<=l;++u)f*=(l+1-u)/u,o[l-u]+=a*Math.pow(e,u)*f;return o[0]+=r,o}function W(t,n,e,r){const[l,u,a,f]=G(t,n,e,!0),s=l.length,c=Math.max(2,~~(r*s)),i=new Float64Array(s),h=new Float64Array(s),d=new Float64Array(s).fill(1);for(let t=-1;++t<=2;){const n=[0,c-1];for(let t=0;t<s;++t){const e=l[t],r=n[0],o=n[1],a=e-l[r]>l[o]-e?r:o;let f=0,s=0,c=0,p=0,M=0;const g=1/Math.abs(l[a]-e||1);for(let t=r;t<=o;++t){const n=l[t],r=u[t],o=X(Math.abs(e-n)*g)*d[t],a=n*o;f+=o,s+=a,c+=r*o,p+=r*a,M+=n*a}const[m,w]=R(s/f,c/f,p/f,M/f);i[t]=m+w*e,h[t]=Math.abs(u[t]-i[t]),Y(l,t+1,n)}if(2===t)break;const e=o(h);if(Math.abs(e)<1e-12)break;for(let t,n,r=0;r<s;++r)t=h[r]/(6*e),d[r]=t>=1?1e-12:(n=1-t*t)*n}return function(t,n,e,r){const o=t.length,l=[];let u,a=0,f=0,s=[];for(;a<o;++a)u=t[a]+e,s[0]===u?s[1]+=(n[a]-s[1])/++f:(f=0,s[1]+=r,s=[u,n[a]],l.push(s));return s[1]+=r,l}(l,i,a,f)}function X(t){return(t=1-t*t*t)*t*t}function Y(t,n,e){const r=t[n];let o=e[0],l=e[1]+1;if(!(l>=t.length))for(;n>o&&t[l]-r<=r-t[o];)e[0]=++o,e[1]=l,++l}const Z=.5*Math.PI/180;function $(t,n,e,r){e=e||25,r=Math.max(e,r||200);const o=n=>[n,t(n)],l=n[0],u=n[1],a=u-l,f=a/r,s=[o(l)],c=[];if(e===r){for(let t=1;t<r;++t)s.push(o(l+t/e*a));return s.push(o(u)),s}c.push(o(u));for(let t=e;--t>0;)c.push(o(l+t/e*a));let i=s[0],h=c[c.length-1];const d=1/a,p=function(t,n){let e=t,r=t;const o=n.length;for(let t=0;t<o;++t){const o=n[t][1];o<e&&(e=o),o>r&&(r=o)}return 1/(r-e)}(i[1],c);for(;h;){const t=o((i[0]+h[0])/2);t[0]-i[0]>=f&&_(i,t,h,d,p)>Z?c.push(t):(i=h,s.push(h),c.pop()),h=c[c.length-1]}return s}function _(t,n,e,r,o){const l=Math.atan2(o*(e[1]-t[1]),r*(e[0]-t[0])),u=Math.atan2(o*(n[1]-t[1]),r*(n[0]-t[0]));return Math.abs(l-u)}export{f as bandwidthNRD,s as bin,h as bootstrapCI,S as cumulativeLogNormal,N as cumulativeNormal,I as cumulativeUniform,v as densityLogNormal,b as densityNormal,D as densityUniform,d as dotbin,E as quantileLogNormal,y as quantileNormal,C as quantileUniform,u as quantiles,a as quartiles,c as random,M as randomInteger,A as randomKDE,p as randomLCG,L as randomLogNormal,P as randomMixture,q as randomNormal,K as randomUniform,Q as regressionConstant,B as regressionExp,j as regressionLinear,W as regressionLoess,z as regressionLog,O as regressionPoly,H as regressionPow,J as regressionQuad,$ as sampleCurve,F as sampleLogNormal,x as sampleNormal,k as sampleUniform,i as setRandom};export default null;
//# sourceMappingURL=/sm/b451d67d3c7984747650625dc06d74a6f75e60d733228ceb3b62ac68376fb32d.map