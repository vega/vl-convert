/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/vega-embed@6.26.0/build/vega-embed.module.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{applyPatch as e}from"/npm/fast-json-patch@3.1.1/+esm";import t from"/npm/json-stringify-pretty-compact@3.0.0/+esm";import*as r from"/npm/vega@5.30.0/+esm";import{isString as n,mergeConfig as i,isBoolean as o,isObject as s,writeConfig as a}from"/npm/vega@5.30.0/+esm";import{expressionInterpreter as c}from"/npm/vega-interpreter@1.0.5/+esm";import*as l from"/npm/vega-lite@6.1.0/+esm";import p from"/npm/vega-schema-url-parser@2.2.0/+esm";import*as h from"/npm/vega-themes@2.15.0/+esm";import{Handler as E}from"/npm/vega-tooltip@0.34.0/+esm";var u="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function m(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}var f=m,v=d;function $(e){if(f===setTimeout)return setTimeout(e,0);if((f===m||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}"function"==typeof u.setTimeout&&(f=setTimeout),"function"==typeof u.clearTimeout&&(v=clearTimeout);var g,I=[],R=!1,L=-1;function N(){R&&g&&(R=!1,g.length?I=g.concat(I):L=-1,I.length&&O())}function O(){if(!R){var e=$(N);R=!0;for(var t=I.length;t;){for(g=I,I=[];++L<t;)g&&g[L].run();L=-1,t=I.length}g=null,R=!1,function(e){if(v===clearTimeout)return clearTimeout(e);if((v===d||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(e);try{return v(e)}catch(t){try{return v.call(null,e)}catch(t){return v.call(this,e)}}}(e)}}function T(e,t){this.fun=e,this.array=t}T.prototype.run=function(){this.fun.apply(null,this.array)};function w(){}var A=w,b=w,y=w,S=w,x=w,C=w,P=w;var D=u.performance||{},F=D.now||D.mozNow||D.msNow||D.oNow||D.webkitNow||function(){return(new Date).getTime()};var G=new Date;var M={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];I.push(new T(e,t)),1!==I.length||R||$(O)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:A,addListener:b,once:y,off:S,removeListener:x,removeAllListeners:C,emit:P,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*F.call(D),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-G)/1e3}};function _(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var U=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}};const j=Object.freeze({loose:!0}),X=Object.freeze({});var k=e=>e?"object"!=typeof e?j:e:X,V={exports:{}};var H={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};var z=M.env&&M.env.NODE_DEBUG&&/\bsemver\b/i.test(M.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};!function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=H,o=z,s=(t=e.exports={}).re=[],a=t.safeRe=[],c=t.src=[],l=t.t={};let p=0;const h="[a-zA-Z0-9-]",E=[["\\s",1],["\\d",i],[h,n]],u=(e,t,r)=>{const n=(e=>{for(const[t,r]of E)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),i=p++;o(e,i,t),l[e]=i,c[i]=t,s[i]=new RegExp(t,r?"g":void 0),a[i]=new RegExp(n,r?"g":void 0)};u("NUMERICIDENTIFIER","0|[1-9]\\d*"),u("NUMERICIDENTIFIERLOOSE","\\d+"),u("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),u("MAINVERSION",`(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})`),u("MAINVERSIONLOOSE",`(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})`),u("PRERELEASEIDENTIFIER",`(?:${c[l.NUMERICIDENTIFIER]}|${c[l.NONNUMERICIDENTIFIER]})`),u("PRERELEASEIDENTIFIERLOOSE",`(?:${c[l.NUMERICIDENTIFIERLOOSE]}|${c[l.NONNUMERICIDENTIFIER]})`),u("PRERELEASE",`(?:-(${c[l.PRERELEASEIDENTIFIER]}(?:\\.${c[l.PRERELEASEIDENTIFIER]})*))`),u("PRERELEASELOOSE",`(?:-?(${c[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[l.PRERELEASEIDENTIFIERLOOSE]})*))`),u("BUILDIDENTIFIER",`${h}+`),u("BUILD",`(?:\\+(${c[l.BUILDIDENTIFIER]}(?:\\.${c[l.BUILDIDENTIFIER]})*))`),u("FULLPLAIN",`v?${c[l.MAINVERSION]}${c[l.PRERELEASE]}?${c[l.BUILD]}?`),u("FULL",`^${c[l.FULLPLAIN]}$`),u("LOOSEPLAIN",`[v=\\s]*${c[l.MAINVERSIONLOOSE]}${c[l.PRERELEASELOOSE]}?${c[l.BUILD]}?`),u("LOOSE",`^${c[l.LOOSEPLAIN]}$`),u("GTLT","((?:<|>)?=?)"),u("XRANGEIDENTIFIERLOOSE",`${c[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),u("XRANGEIDENTIFIER",`${c[l.NUMERICIDENTIFIER]}|x|X|\\*`),u("XRANGEPLAIN",`[v=\\s]*(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:${c[l.PRERELEASE]})?${c[l.BUILD]}?)?)?`),u("XRANGEPLAINLOOSE",`[v=\\s]*(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:${c[l.PRERELEASELOOSE]})?${c[l.BUILD]}?)?)?`),u("XRANGE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAIN]}$`),u("XRANGELOOSE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAINLOOSE]}$`),u("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),u("COERCE",`${c[l.COERCEPLAIN]}(?:$|[^\\d])`),u("COERCEFULL",c[l.COERCEPLAIN]+`(?:${c[l.PRERELEASE]})?`+`(?:${c[l.BUILD]})?(?:$|[^\\d])`),u("COERCERTL",c[l.COERCE],!0),u("COERCERTLFULL",c[l.COERCEFULL],!0),u("LONETILDE","(?:~>?)"),u("TILDETRIM",`(\\s*)${c[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",u("TILDE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAIN]}$`),u("TILDELOOSE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAINLOOSE]}$`),u("LONECARET","(?:\\^)"),u("CARETTRIM",`(\\s*)${c[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",u("CARET",`^${c[l.LONECARET]}${c[l.XRANGEPLAIN]}$`),u("CARETLOOSE",`^${c[l.LONECARET]}${c[l.XRANGEPLAINLOOSE]}$`),u("COMPARATORLOOSE",`^${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]})$|^$`),u("COMPARATOR",`^${c[l.GTLT]}\\s*(${c[l.FULLPLAIN]})$|^$`),u("COMPARATORTRIM",`(\\s*)${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]}|${c[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",u("HYPHENRANGE",`^\\s*(${c[l.XRANGEPLAIN]})\\s+-\\s+(${c[l.XRANGEPLAIN]})\\s*$`),u("HYPHENRANGELOOSE",`^\\s*(${c[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[l.XRANGEPLAINLOOSE]})\\s*$`),u("STAR","(<|>)?=?\\s*\\*"),u("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),u("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(V,V.exports);var B=V.exports;const W=/^[0-9]+$/,Y=(e,t)=>{const r=W.test(e),n=W.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1};var J={compareIdentifiers:Y,rcompareIdentifiers:(e,t)=>Y(t,e)};const q=z,{MAX_LENGTH:K,MAX_SAFE_INTEGER:Z}=H,{safeRe:Q,t:ee}=B,te=k,{compareIdentifiers:re}=J;var ne=class e{constructor(t,r){if(r=te(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>K)throw new TypeError(`version is longer than ${K} characters`);q("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?Q[ee.LOOSE]:Q[ee.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Z||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Z||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Z||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<Z)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(q("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if("string"==typeof t&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),re(this.major,t.major)||re(this.minor,t.minor)||re(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const e=this.prerelease[r],n=t.prerelease[r];if(q("prerelease compare",r,e,n),void 0===e&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===e)return-1;if(e!==n)return re(e,n)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{const e=this.build[r],n=t.build[r];if(q("build compare",r,e,n),void 0===e&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===e)return-1;if(e!==n)return re(e,n)}while(++r)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===re(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};const ie=ne;var oe=(e,t,r)=>new ie(e,r).compare(new ie(t,r));const se=oe;const ae=oe;const ce=oe;const le=oe;const pe=oe;const he=oe;const Ee=(e,t,r)=>0===se(e,t,r),ue=(e,t,r)=>0!==ae(e,t,r),me=(e,t,r)=>ce(e,t,r)>0,de=(e,t,r)=>le(e,t,r)>=0,fe=(e,t,r)=>pe(e,t,r)<0,ve=(e,t,r)=>he(e,t,r)<=0;var $e,ge,Ie,Re,Le=(e,t,r,n)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Ee(e,r,n);case"!=":return ue(e,r,n);case">":return me(e,r,n);case">=":return de(e,r,n);case"<":return fe(e,r,n);case"<=":return ve(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};function Ne(){if(Re)return Ie;Re=1;class e{constructor(t,i){if(i=r(i),t instanceof e)return t.loose===!!i.loose&&t.includePrerelease===!!i.includePrerelease?t:new e(t.raw,i);if(t instanceof n)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=i,this.loose=!!i.loose,this.includePrerelease=!!i.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!u(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&m(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const r=((this.options.includePrerelease&&h)|(this.options.loose&&E))+":"+e,o=t.get(r);if(o)return o;const m=this.options.loose,d=m?s[a.HYPHENRANGELOOSE]:s[a.HYPHENRANGE];e=e.replace(d,w(this.options.includePrerelease)),i("hyphen replace",e),e=e.replace(s[a.COMPARATORTRIM],c),i("comparator trim",e),e=e.replace(s[a.TILDETRIM],l),i("tilde trim",e),e=e.replace(s[a.CARETTRIM],p),i("caret trim",e);let v=e.split(" ").map((e=>f(e,this.options))).join(" ").split(/\s+/).map((e=>T(e,this.options)));m&&(v=v.filter((e=>(i("loose invalid filter",e,this.options),!!e.match(s[a.COMPARATORLOOSE]))))),i("range list",v);const $=new Map,g=v.map((e=>new n(e,this.options)));for(const e of g){if(u(e))return[e];$.set(e.value,e)}$.size>1&&$.has("")&&$.delete("");const I=[...$.values()];return t.set(r,I),I}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some((e=>d(e,r)&&t.set.some((t=>d(t,r)&&e.every((e=>t.every((t=>e.intersects(t,r)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new o(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(A(this.set[t],e,this.options))return!0;return!1}}Ie=e;const t=new U,r=k,n=function(){if(ge)return $e;ge=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(n,i){if(i=r(i),n instanceof t){if(n.loose===!!i.loose)return n;n=n.value}n=n.trim().split(/\s+/).join(" "),s("comparator",n,i),this.options=i,this.loose=!!i.loose,this.parse(n),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(t){const r=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],o=t.match(r);if(!o)throw new TypeError(`Invalid comparator: ${t}`);this.operator=void 0!==o[1]?o[1]:"","="===this.operator&&(this.operator=""),o[2]?this.semver=new a(o[2],this.options.loose):this.semver=e}toString(){return this.value}test(t){if(s("Comparator.test",t,this.options.loose),this.semver===e||t===e)return!0;if("string"==typeof t)try{t=new a(t,this.options)}catch(e){return!1}return o(t,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new c(e.value,n).test(this.value):""===e.operator?""===e.value||new c(this.value,n).test(e.semver):!((n=r(n)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!e.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!e.operator.startsWith("<"))&&(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))&&!(o(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))&&!(o(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}$e=t;const r=k,{safeRe:n,t:i}=B,o=Le,s=z,a=ne,c=Ne();return $e}(),i=z,o=ne,{safeRe:s,t:a,comparatorTrimReplace:c,tildeTrimReplace:l,caretTrimReplace:p}=B,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:E}=H,u=e=>"<0.0.0-0"===e.value,m=e=>""===e.value,d=(e,t)=>{let r=!0;const n=e.slice();let i=n.pop();for(;r&&n.length;)r=n.every((e=>i.intersects(e,t))),i=n.pop();return r},f=(e,t)=>(i("comp",e,t),e=I(e,t),i("caret",e),e=$(e,t),i("tildes",e),e=L(e,t),i("xrange",e),e=O(e,t),i("stars",e),e),v=e=>!e||"x"===e.toLowerCase()||"*"===e,$=(e,t)=>e.trim().split(/\s+/).map((e=>g(e,t))).join(" "),g=(e,t)=>{const r=t.loose?s[a.TILDELOOSE]:s[a.TILDE];return e.replace(r,((t,r,n,o,s)=>{let a;return i("tilde",e,t,r,n,o,s),v(r)?a="":v(n)?a=`>=${r}.0.0 <${+r+1}.0.0-0`:v(o)?a=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:s?(i("replaceTilde pr",s),a=`>=${r}.${n}.${o}-${s} <${r}.${+n+1}.0-0`):a=`>=${r}.${n}.${o} <${r}.${+n+1}.0-0`,i("tilde return",a),a}))},I=(e,t)=>e.trim().split(/\s+/).map((e=>R(e,t))).join(" "),R=(e,t)=>{i("caret",e,t);const r=t.loose?s[a.CARETLOOSE]:s[a.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,o,s,a)=>{let c;return i("caret",e,t,r,o,s,a),v(r)?c="":v(o)?c=`>=${r}.0.0${n} <${+r+1}.0.0-0`:v(s)?c="0"===r?`>=${r}.${o}.0${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.0${n} <${+r+1}.0.0-0`:a?(i("replaceCaret pr",a),c="0"===r?"0"===o?`>=${r}.${o}.${s}-${a} <${r}.${o}.${+s+1}-0`:`>=${r}.${o}.${s}-${a} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${s}-${a} <${+r+1}.0.0-0`):(i("no pr"),c="0"===r?"0"===o?`>=${r}.${o}.${s}${n} <${r}.${o}.${+s+1}-0`:`>=${r}.${o}.${s}${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${s} <${+r+1}.0.0-0`),i("caret return",c),c}))},L=(e,t)=>(i("replaceXRanges",e,t),e.split(/\s+/).map((e=>N(e,t))).join(" ")),N=(e,t)=>{e=e.trim();const r=t.loose?s[a.XRANGELOOSE]:s[a.XRANGE];return e.replace(r,((r,n,o,s,a,c)=>{i("xRange",e,r,n,o,s,a,c);const l=v(o),p=l||v(s),h=p||v(a),E=h;return"="===n&&E&&(n=""),c=t.includePrerelease?"-0":"",l?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&E?(p&&(s=0),a=0,">"===n?(n=">=",p?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):"<="===n&&(n="<",p?o=+o+1:s=+s+1),"<"===n&&(c="-0"),r=`${n+o}.${s}.${a}${c}`):p?r=`>=${o}.0.0${c} <${+o+1}.0.0-0`:h&&(r=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),i("xRange return",r),r}))},O=(e,t)=>(i("replaceStars",e,t),e.trim().replace(s[a.STAR],"")),T=(e,t)=>(i("replaceGTE0",e,t),e.trim().replace(s[t.includePrerelease?a.GTE0PRE:a.GTE0],"")),w=e=>(t,r,n,i,o,s,a,c,l,p,h,E)=>`${r=v(n)?"":v(i)?`>=${n}.0.0${e?"-0":""}`:v(o)?`>=${n}.${i}.0${e?"-0":""}`:s?`>=${r}`:`>=${r}${e?"-0":""}`} ${c=v(l)?"":v(p)?`<${+l+1}.0.0-0`:v(h)?`<${l}.${+p+1}.0-0`:E?`<=${l}.${p}.${h}-${E}`:e?`<${l}.${p}.${+h+1}-0`:`<=${c}`}`.trim(),A=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(i(e[r].semver),e[r].semver!==n.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0};return Ie}const Oe=Ne();var Te=(e,t,r)=>{try{t=new Oe(t,r)}catch(e){return!1}return t.test(e)},we=_(Te);var Ae='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus-within summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: "";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n';function be(e,...t){for(const r of t)ye(e,r);return e}function ye(e,t){for(const r of Object.keys(t))a(e,r,t[r],!0)}const Se="6.26.0",xe=r;let Ce=l;const Pe="undefined"!=typeof window?window:void 0;void 0===Ce&&Pe?.vl?.compile&&(Ce=Pe.vl);const De={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Fe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Ge={vega:"Vega","vega-lite":"Vega-Lite"},Me={vega:xe.version,"vega-lite":Ce?Ce.version:"not available"},_e={vega:e=>e,"vega-lite":(e,t)=>Ce.compile(e,{config:t}).spec},Ue='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',je="chart-wrapper";function Xe(e,t,r,n){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${r}</body></html>`,s=window.open("");s.document.write(i+e+o),s.document.title=`${Ge[n]} JSON Source`}function ke(e,t){if(e.$schema){const r=p(e.$schema);t&&t!==r.library&&console.warn(`The given visualization spec is written in ${Ge[r.library]}, but mode argument sets ${Ge[t]??t}.`);const n=r.library;return we(Me[n],`^${r.version.slice(1)}`)||console.warn(`The input spec uses ${Ge[n]} ${r.version}, but the current version of ${Ge[n]} is v${Me[n]}.`),n}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function Ve(e){return!(!e||!("load"in e))}function He(e){return Ve(e)?e:xe.loader(e)}async function ze(r,a,l={}){let u,m;n(a)?(m=He(l.loader),u=JSON.parse(await m.load(a))):u=a;const d=function(e){const t=e.usermeta?.embedOptions??{};return n(t.defaultStyle)&&(t.defaultStyle=!1),t}(u),f=d.loader;m&&!f||(m=He(l.loader??f));const v=await Be(d,m),$=await Be(l,m),g={...be($,v),config:i($.config??{},v.config??{})};return await async function(r,n,a={},l){const u=a.theme?i(h[a.theme],a.config??{}):a.config,m=o(a.actions)?a.actions:be({},De,a.actions??{}),d={...Fe,...a.i18n},f=a.renderer??"canvas",v=a.logLevel??xe.Warn,$=a.downloadFileName??"visualization",g="string"==typeof r?document.querySelector(r):r;if(!g)throw new Error(`${r} does not exist`);if(!1!==a.defaultStyle){const e="vega-embed-style",{root:t,rootContainer:r}=function(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}(g);if(!t.getElementById(e)){const t=document.createElement("style");t.id=e,t.innerHTML=void 0===a.defaultStyle||!0===a.defaultStyle?Ae.toString():a.defaultStyle,r.appendChild(t)}}const I=ke(n,a.mode);let R=_e[I](n,u);if("vega-lite"===I&&R.$schema){const e=p(R.$schema);we(Me.vega,`^${e.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${e.version}, but current version is v${Me.vega}.`)}g.classList.add("vega-embed"),m&&g.classList.add("has-actions");g.innerHTML="";let L=g;if(m){const e=document.createElement("div");e.classList.add(je),g.appendChild(e),L=e}const N=a.patch;N&&(R=N instanceof Function?N(R):e(R,N,!0,!1).newDocument);a.formatLocale&&xe.formatLocale(a.formatLocale);a.timeFormatLocale&&xe.timeFormatLocale(a.timeFormatLocale);if(a.expressionFunctions)for(const e in a.expressionFunctions){const t=a.expressionFunctions[e];"fn"in t?xe.expressionFunction(e,t.fn,t.visitor):t instanceof Function&&xe.expressionFunction(e,t)}const{ast:O}=a,T=xe.parse(R,"vega-lite"===I?{}:u,{ast:O}),w=new(a.viewClass||xe.View)(T,{loader:l,logLevel:v,renderer:f,...O?{expr:xe.expressionInterpreter??a.expr??c}:{}});if(w.addSignalListener("autosize",((e,t)=>{const{type:r}=t;"fit-x"==r?(L.classList.add("fit-x"),L.classList.remove("fit-y")):"fit-y"==r?(L.classList.remove("fit-x"),L.classList.add("fit-y")):"fit"==r?L.classList.add("fit-x","fit-y"):L.classList.remove("fit-x","fit-y")})),!1!==a.tooltip){const{loader:e,tooltip:t}=a,r=e&&!Ve(e)?e?.baseURL:void 0,n="function"==typeof t?t:new E({baseURL:r,...!0===t?{}:t}).call;w.tooltip(n)}let A,{hover:b}=a;void 0===b&&(b="vega"===I);if(b){const{hoverSet:e,updateSet:t}="boolean"==typeof b?{}:b;w.hover(e,t)}a&&(null!=a.width&&w.width(a.width),null!=a.height&&w.height(a.height),null!=a.padding&&w.padding(a.padding));if(await w.initialize(L,a.bind).runAsync(),!1!==m){let e=g;if(!1!==a.defaultStyle||a.forceActionsMenu){const t=document.createElement("details");t.title=d.CLICK_TO_VIEW_ACTIONS,g.append(t),e=t;const r=document.createElement("summary");r.innerHTML=Ue,t.append(r),A=e=>{t.contains(e.target)||t.removeAttribute("open")},document.addEventListener("click",A)}const r=document.createElement("div");if(e.append(r),r.classList.add("vega-actions"),!0===m||!1!==m.export)for(const e of["svg","png"])if(!0===m||!0===m.export||m.export[e]){const t=d[`${e.toUpperCase()}_ACTION`],n=document.createElement("a"),i=s(a.scaleFactor)?a.scaleFactor[e]:a.scaleFactor;n.text=t,n.href="#",n.target="_blank",n.download=`${$}.${e}`,n.addEventListener("mousedown",(async function(t){t.preventDefault();const r=await w.toImageURL(e,i);this.href=r})),r.append(n)}if(!0===m||!1!==m.source){const e=document.createElement("a");e.text=d.SOURCE_ACTION,e.href="#",e.addEventListener("click",(function(e){Xe(t(n),a.sourceHeader??"",a.sourceFooter??"",I),e.preventDefault()})),r.append(e)}if("vega-lite"===I&&(!0===m||!1!==m.compiled)){const e=document.createElement("a");e.text=d.COMPILED_ACTION,e.href="#",e.addEventListener("click",(function(e){Xe(t(R),a.sourceHeader??"",a.sourceFooter??"","vega"),e.preventDefault()})),r.append(e)}if(!0===m||!1!==m.editor){const e=a.editorUrl??"https://vega.github.io/editor/",i=document.createElement("a");i.text=d.EDITOR_ACTION,i.href="#",i.addEventListener("click",(function(r){!function(e,t,r){const n=e.open(t),{origin:i}=new URL(t);let o=40;e.addEventListener("message",(function t(r){r.source===n&&(o=0,e.removeEventListener("message",t,!1))}),!1),setTimeout((function e(){o<=0||(n.postMessage(r,i),setTimeout(e,250),o-=1)}),250)}(window,e,{config:u,mode:N?"vega":I,renderer:f,spec:t(N?R:n)}),r.preventDefault()})),r.append(i)}}function y(){A&&document.removeEventListener("click",A),w.finalize()}return{view:w,spec:n,vgSpec:R,finalize:y,embedOptions:a}}(r,u,g,m)}async function Be(e,t){const r=n(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=n(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...r?{config:r}:{}}}export{De as DEFAULT_ACTIONS,ze as default,ke as guessMode,xe as vega,Ce as vegaLite,Se as version};
//# sourceMappingURL=/sm/f29522ad58947205f116afe765725215a6e02a432bea8c1e5586a654ff28e323.map