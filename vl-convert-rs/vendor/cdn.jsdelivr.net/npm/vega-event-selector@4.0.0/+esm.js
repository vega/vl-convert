/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/vega-event-selector@4.0.0/build/vega-event-selector.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const t="[",e="]",r=/[[\]{}]/,n={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let i,s;function l(t,e,r){return i=e||"view",s=r||n,c(t.trim()).map(u)}function o(t,e,r,n,i){const s=t.length;let l,o=0;for(;e<s;++e){if(l=t[e],!o&&l===r)return e;i&&i.includes(l)?--o:n&&n.includes(l)&&++o}return e}function c(t){const e=[],r=t.length;let n=0,i=0;for(;i<r;)i=o(t,i,",","[{","]}"),e.push(t.substring(n,i).trim()),n=++i;if(0===e.length)throw"Empty event selector: "+t;return e}function u(n){return"["===n[0]?function(r){const n=r.length;let i,s=1;if(s=o(r,s,e,t,e),s===n)throw"Empty between selector: "+r;if(i=c(r.substring(1,s)),2!==i.length)throw"Between selector must have two elements: "+r;if(r=r.slice(s+1).trim(),">"!==r[0])throw"Expected '>' after between selector: "+r;i=i.map(u);const l=u(r.slice(1).trim());if(l.between)return{between:i,stream:l};l.between=i;return l}(n):function(n){const l={source:i},c=[];let u,h,f=[0,0],a=0,m=0,p=n.length,w=0;if("}"===n[p-1]){if(w=n.lastIndexOf("{"),!(w>=0))throw"Unmatched right brace: "+n;try{f=function(t){const e=t.split(",");if(!t.length||e.length>2)throw t;return e.map((e=>{const r=+e;if(r!=r)throw t;return r}))}(n.substring(w+1,p-1))}catch(t){throw"Invalid throttle specification: "+n}p=(n=n.slice(0,w).trim()).length,w=0}if(!p)throw n;"@"===n[0]&&(a=++w);u=o(n,w,":"),u<p&&(c.push(n.substring(m,u).trim()),m=w=++u);if(w=o(n,w,t),w===p)c.push(n.substring(m,p).trim());else if(c.push(n.substring(m,w).trim()),h=[],m=++w,m===p)throw"Unmatched left bracket: "+n;for(;w<p;){if(w=o(n,w,e),w===p)throw"Unmatched left bracket: "+n;if(h.push(n.substring(m,w).trim()),w<p-1&&n[++w]!==t)throw"Expected left bracket: "+n;m=++w}if(!(p=c.length)||r.test(c[p-1]))throw"Invalid event selector: "+n;p>1?(l.type=c[1],a?l.markname=c[0].slice(1):(g=c[0],s[g]?l.marktype=c[0]:l.source=c[0])):l.type=c[0];var g;"!"===l.type.slice(-1)&&(l.consume=!0,l.type=l.type.slice(0,-1));null!=h&&(l.filter=h);f[0]&&(l.throttle=f[0]);f[1]&&(l.debounce=f[1]);return l}(n)}export{l as parseSelector};export default null;
//# sourceMappingURL=/sm/cab623ccbc603ef322a7051434d8e3b3b3ac55a77b9d29d5793e8ae14ae5923f.map