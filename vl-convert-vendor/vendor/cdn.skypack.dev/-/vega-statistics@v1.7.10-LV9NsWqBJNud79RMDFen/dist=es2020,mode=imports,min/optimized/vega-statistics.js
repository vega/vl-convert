import{ascending as C,quantileSorted as ce,deviation as ae,quantile as W,median as he}from"/-/d3-array@v2.12.1-Ilh7e293asl3yQWpnFdl/dist=es2020,mode=imports,min/optimized/d3-array.js";function*K(n,t){if(t==null)for(let e of n)e!=null&&e!==""&&(e=+e)>=e&&(yield e);else{let e=-1;for(let l of n)l=t(l,++e,n),l!=null&&l!==""&&(l=+l)>=l&&(yield l)}}function v(n,t,e){const l=Float64Array.from(K(n,e));return l.sort(C),t.map(o=>ce(l,o))}function B(n,t){return v(n,[.25,.5,.75],t)}function G(n,t){const e=n.length,l=ae(n,t),o=B(n,t),r=(o[2]-o[0])/1.34,i=Math.min(l,r)||l||Math.abs(o[0])||1;return 1.06*i*Math.pow(e,-.2)}function ge(n){const t=n.maxbins||20,e=n.base||10,l=Math.log(e),o=n.divide||[5,2];let r=n.extent[0],i=n.extent[1],u,f,s,c,a,h;const g=n.span||i-r||Math.abs(r)||1;if(n.step)u=n.step;else if(n.steps){for(c=g/t,a=0,h=n.steps.length;a<h&&n.steps[a]<c;++a);u=n.steps[Math.max(0,a-1)]}else{for(f=Math.ceil(Math.log(t)/l),s=n.minstep||0,u=Math.max(s,Math.pow(e,Math.round(Math.log(g)/l)-f));Math.ceil(g/u)>t;)u*=e;for(a=0,h=o.length;a<h;++a)c=u/o[a],c>=s&&g/c<=t&&(u=c)}c=Math.log(u);const p=c>=0?0:~~(-c/l)+1,M=Math.pow(e,-p-1);return(n.nice||n.nice===void 0)&&(c=Math.floor(r/u+M)*u,r=r<c?c-u:c,i=Math.ceil(i/u)*u),{start:r,stop:i===r?r+u:i,step:u}}var N=Math.random;function pe(n){N=n}function Me(n,t,e,l){if(!n.length)return[void 0,void 0];const o=Float64Array.from(K(n,l)),r=o.length,i=t;let u,f,s,c;for(s=0,c=Array(i);s<i;++s){for(u=0,f=0;f<r;++f)u+=o[~~(N()*r)];c[s]=u/r}return c.sort(C),[W(c,e/2),W(c,1-e/2)]}function de(n,t,e,l){l=l||(h=>h);const o=n.length,r=new Float64Array(o);let i=0,u=1,f=l(n[0]),s=f,c=f+t,a;for(;u<o;++u){if(a=l(n[u]),a>=c){for(s=(f+s)/2;i<u;++i)r[i]=s;c=a+t,f=a}s=a}for(s=(f+s)/2;i<u;++i)r[i]=s;return e?me(r,t+t/4):r}function me(n,t){const e=n.length;let l=0,o=1,r,i;for(;n[l]===n[o];)++o;for(;o<e;){for(r=o+1;n[o]===n[r];)++r;if(n[o]-n[o-1]<t){for(i=o+(l+r-o-o>>1);i<o;)n[i++]=n[o];for(;i>o;)n[i--]=n[l]}l=o,o=r}return n}function we(n){return function(){return n=(1103515245*n+12345)%2147483647,n/2147483647}}function be(n,t){t==null&&(t=n,n=0);let e,l,o;const r={min(i){return arguments.length?(e=i||0,o=l-e,r):e},max(i){return arguments.length?(l=i||0,o=l-e,r):l},sample(){return e+Math.floor(o*N())},pdf(i){return i===Math.floor(i)&&i>=e&&i<l?1/o:0},cdf(i){const u=Math.floor(i);return u<e?0:u>=l?1:(u-e+1)/o},icdf(i){return i>=0&&i<=1?e-1+Math.floor(i*o):NaN}};return r.min(n).max(t)}const Z=Math.sqrt(2*Math.PI),Ne=Math.SQRT2;let L=NaN;function z(n,t){n=n||0,t=t??1;let e=0,l=0,o,r;if(L===L)e=L,L=NaN;else{do e=N()*2-1,l=N()*2-1,o=e*e+l*l;while(o===0||o>1);r=Math.sqrt(-2*Math.log(o)/o),e*=r,L=l*r}return n+e*t}function H(n,t,e){e=e??1;const l=(n-(t||0))/e;return Math.exp(-.5*l*l)/(e*Z)}function P(n,t,e){t=t||0,e=e??1;const l=(n-t)/e,o=Math.abs(l);let r;if(o>37)r=0;else{const i=Math.exp(-o*o/2);let u;o<7.07106781186547?(u=.0352624965998911*o+.700383064443688,u=u*o+6.37396220353165,u=u*o+33.912866078383,u=u*o+112.079291497871,u=u*o+221.213596169931,u=u*o+220.206867912376,r=i*u,u=.0883883476483184*o+1.75566716318264,u=u*o+16.064177579207,u=u*o+86.7807322029461,u=u*o+296.564248779674,u=u*o+637.333633378831,u=u*o+793.826512519948,u=u*o+440.413735824752,r=r/u):(u=o+.65,u=o+4/u,u=o+3/u,u=o+2/u,u=o+1/u,r=i/u/2.506628274631)}return l>0?1-r:r}function D(n,t,e){return n<0||n>1?NaN:(t||0)+(e??1)*Ne*ye(2*n-1)}function ye(n){let t=-Math.log((1-n)*(1+n)),e;return t<6.25?(t-=3.125,e=-364441206401782e-35,e=-16850591381820166e-35+e*t,e=128584807152564e-32+e*t,e=11157877678025181e-33+e*t,e=-1333171662854621e-31+e*t,e=20972767875968562e-33+e*t,e=6637638134358324e-30+e*t,e=-4054566272975207e-29+e*t,e=-8151934197605472e-29+e*t,e=26335093153082323e-28+e*t,e=-12975133253453532e-27+e*t,e=-5415412054294628e-26+e*t,e=10512122733215323e-25+e*t,e=-4112633980346984e-24+e*t,e=-29070369957882005e-24+e*t,e=42347877827932404e-23+e*t,e=-13654692000834679e-22+e*t,e=-13882523362786469e-21+e*t,e=.00018673420803405714+e*t,e=-.000740702534166267+e*t,e=-.006033670871430149+e*t,e=.24015818242558962+e*t,e=1.6536545626831027+e*t):t<16?(t=Math.sqrt(t)-3.25,e=22137376921775787e-25,e=9075656193888539e-23+e*t,e=-27517406297064545e-23+e*t,e=18239629214389228e-24+e*t,e=15027403968909828e-22+e*t,e=-4013867526981546e-21+e*t,e=29234449089955446e-22+e*t,e=12475304481671779e-21+e*t,e=-47318229009055734e-21+e*t,e=6828485145957318e-20+e*t,e=24031110387097894e-21+e*t,e=-.0003550375203628475+e*t,e=.0009532893797373805+e*t,e=-.0016882755560235047+e*t,e=.002491442096107851+e*t,e=-.003751208507569241+e*t,e=.005370914553590064+e*t,e=1.0052589676941592+e*t,e=3.0838856104922208+e*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,e=-27109920616438573e-27,e=-2555641816996525e-25+e*t,e=15076572693500548e-25+e*t,e=-3789465440126737e-24+e*t,e=761570120807834e-23+e*t,e=-1496002662714924e-23+e*t,e=2914795345090108e-23+e*t,e=-6771199775845234e-23+e*t,e=22900482228026655e-23+e*t,e=-99298272942317e-20+e*t,e=4526062597223154e-21+e*t,e=-1968177810553167e-20+e*t,e=7599527703001776e-20+e*t,e=-.00021503011930044477+e*t,e=-.00013871931833623122+e*t,e=1.0103004648645344+e*t,e=4.849906401408584+e*t):e=Infinity,e*n}function J(n,t){let e,l;const o={mean(r){return arguments.length?(e=r||0,o):e},stdev(r){return arguments.length?(l=r??1,o):l},sample:()=>z(e,l),pdf:r=>H(r,e,l),cdf:r=>P(r,e,l),icdf:r=>D(r,e,l)};return o.mean(n).stdev(t)}function Xe(n,t){const e=J();let l=0;const o={data(r){return arguments.length?(n=r,l=r?r.length:0,o.bandwidth(t)):n},bandwidth(r){return arguments.length?(t=r,!t&&n&&(t=G(n)),o):t},sample(){return n[~~(N()*l)]+t*e.sample()},pdf(r){let i=0,u=0;for(;u<l;++u)i+=e.pdf((r-n[u])/t);return i/t/l},cdf(r){let i=0,u=0;for(;u<l;++u)i+=e.cdf((r-n[u])/t);return i/l},icdf(){throw Error("KDE icdf not supported.")}};return o.data(n)}function O(n,t){return n=n||0,t=t??1,Math.exp(n+z()*t)}function V(n,t,e){if(n<=0)return 0;t=t||0,e=e??1;const l=(Math.log(n)-t)/e;return Math.exp(-.5*l*l)/(e*Z*n)}function $(n,t,e){return P(Math.log(n),t,e)}function _(n,t,e){return Math.exp(D(n,t,e))}function qe(n,t){let e,l;const o={mean(r){return arguments.length?(e=r||0,o):e},stdev(r){return arguments.length?(l=r??1,o):l},sample:()=>O(e,l),pdf:r=>V(r,e,l),cdf:r=>$(r,e,l),icdf:r=>_(r,e,l)};return o.mean(n).stdev(t)}function Ye(n,t){let e=0,l;function o(i){const u=[];let f=0,s;for(s=0;s<e;++s)f+=u[s]=i[s]==null?1:+i[s];for(s=0;s<e;++s)u[s]/=f;return u}const r={weights(i){return arguments.length?(l=o(t=i||[]),r):t},distributions(i){return arguments.length?(i?(e=i.length,n=i):(e=0,n=[]),r.weights(t)):n},sample(){const i=N();let u=n[e-1],f=l[0],s=0;for(;s<e-1;f+=l[++s])if(i<f){u=n[s];break}return u.sample()},pdf(i){let u=0,f=0;for(;f<e;++f)u+=l[f]*n[f].pdf(i);return u},cdf(i){let u=0,f=0;for(;f<e;++f)u+=l[f]*n[f].cdf(i);return u},icdf(){throw Error("Mixture icdf not supported.")}};return r.distributions(n).weights(t)}function x(n,t){return t==null&&(t=n??1,n=0),n+(t-n)*N()}function ee(n,t,e){return e==null&&(e=t??1,t=0),n>=t&&n<=e?1/(e-t):0}function te(n,t,e){return e==null&&(e=t??1,t=0),n<t?0:n>e?1:(n-t)/(e-t)}function ne(n,t,e){return e==null&&(e=t??1,t=0),n>=0&&n<=1?t+n*(e-t):NaN}function Ae(n,t){let e,l;const o={min(r){return arguments.length?(e=r||0,o):e},max(r){return arguments.length?(l=r??1,o):l},sample:()=>x(e,l),pdf:r=>ee(r,e,l),cdf:r=>te(r,e,l),icdf:r=>ne(r,e,l)};return t==null&&(t=n??1,n=0),o.min(n).max(t)}function I(n,t,e,l){const o=l-n*n,r=Math.abs(o)<1e-24?0:(e-n*t)/o,i=t-r*n;return[i,r]}function S(n,t,e,l){n=n.filter(g=>{let p=t(g),M=e(g);return p!=null&&(p=+p)>=p&&M!=null&&(M=+M)>=M}),l&&n.sort((g,p)=>t(g)-t(p));const o=n.length,r=new Float64Array(o),i=new Float64Array(o);let u=0,f=0,s=0,c,a,h;for(h of n)r[u]=c=+t(h),i[u]=a=+e(h),++u,f+=(c-f)/u,s+=(a-s)/u;for(u=0;u<o;++u)r[u]-=f,i[u]-=s;return[r,i,f,s]}function k(n,t,e,l){let o=-1,r,i;for(const u of n)r=t(u),i=e(u),r!=null&&(r=+r)>=r&&i!=null&&(i=+i)>=i&&l(r,i,++o)}function Y(n,t,e,l,o){let r=0,i=0;return k(n,t,e,(u,f)=>{const s=f-o(u),c=f-l;r+=s*s,i+=c*c}),1-r/i}function re(n,t,e){let l=0,o=0,r=0,i=0,u=0;k(n,t,e,(c,a)=>{++u,l+=(c-l)/u,o+=(a-o)/u,r+=(c*a-r)/u,i+=(c*c-i)/u});const f=I(l,o,r,i),s=c=>f[0]+f[1]*c;return{coef:f,predict:s,rSquared:Y(n,t,e,o,s)}}function Fe(n,t,e){let l=0,o=0,r=0,i=0,u=0;k(n,t,e,(c,a)=>{++u,c=Math.log(c),l+=(c-l)/u,o+=(a-o)/u,r+=(c*a-r)/u,i+=(c*c-i)/u});const f=I(l,o,r,i),s=c=>f[0]+f[1]*Math.log(c);return{coef:f,predict:s,rSquared:Y(n,t,e,o,s)}}function Le(n,t,e){const[l,o,r,i]=S(n,t,e);let u=0,f=0,s=0,c=0,a=0,h,g,p;k(n,t,e,(b,w)=>{h=l[a++],g=Math.log(w),p=h*w,u+=(w*g-u)/a,f+=(p-f)/a,s+=(p*g-s)/a,c+=(h*p-c)/a});const[M,d]=I(f/i,u/i,s/i,c/i),m=b=>Math.exp(M+d*(b-r));return{coef:[Math.exp(M-d*r),d],predict:m,rSquared:Y(n,t,e,i,m)}}function Ie(n,t,e){let l=0,o=0,r=0,i=0,u=0,f=0;k(n,t,e,(a,h)=>{const g=Math.log(a),p=Math.log(h);++f,l+=(g-l)/f,o+=(p-o)/f,r+=(g*p-r)/f,i+=(g*g-i)/f,u+=(h-u)/f});const s=I(l,o,r,i),c=a=>s[0]*Math.pow(a,s[1]);return s[0]=Math.exp(s[0]),{coef:s,predict:c,rSquared:Y(n,t,e,u,c)}}function oe(n,t,e){const[l,o,r,i]=S(n,t,e),u=l.length;let f=0,s=0,c=0,a=0,h=0,g,p,M,d;for(g=0;g<u;)p=l[g],M=o[g++],d=p*p,f+=(d-f)/g,s+=(d*p-s)/g,c+=(d*d-c)/g,a+=(p*M-a)/g,h+=(d*M-h)/g;const m=c-f*f,b=f*m-s*s,w=(h*f-a*s)/b,y=(a*m-h*s)/b,X=-w*f,A=q=>(q=q-r,w*q*q+y*q+X+i);return{coef:[X-y*r+w*r*r+i,y-2*w*r,w],predict:A,rSquared:Y(n,t,e,i,A)}}function ke(n,t,e,l){if(l===1)return re(n,t,e);if(l===2)return oe(n,t,e);const[o,r,i,u]=S(n,t,e),f=o.length,s=[],c=[],a=l+1;let h,g,p,M,d;for(h=0;h<a;++h){for(p=0,M=0;p<f;++p)M+=Math.pow(o[p],h)*r[p];for(s.push(M),d=new Float64Array(a),g=0;g<a;++g){for(p=0,M=0;p<f;++p)M+=Math.pow(o[p],h+g);d[g]=M}c.push(d)}c.push(s);const m=Ee(c),b=w=>{w-=i;let y=u+m[0]+m[1]*w+m[2]*w*w;for(h=3;h<a;++h)y+=m[h]*Math.pow(w,h);return y};return{coef:Se(a,m,-i,u),predict:b,rSquared:Y(n,t,e,u,b)}}function Se(n,t,e,l){const o=Array(n);let r,i,u,f;for(r=0;r<n;++r)o[r]=0;for(r=n-1;r>=0;--r)for(u=t[r],f=1,o[r]+=u,i=1;i<=r;++i)f*=(r+1-i)/i,o[r-i]+=u*Math.pow(e,i)*f;return o[0]+=l,o}function Ee(n){const t=n.length-1,e=[];let l,o,r,i,u;for(l=0;l<t;++l){for(i=l,o=l+1;o<t;++o)Math.abs(n[l][o])>Math.abs(n[l][i])&&(i=o);for(r=l;r<t+1;++r)u=n[r][l],n[r][l]=n[r][i],n[r][i]=u;for(o=l+1;o<t;++o)for(r=t;r>=l;r--)n[r][o]-=n[r][l]*n[l][o]/n[l][l]}for(o=t-1;o>=0;--o){for(u=0,r=o+1;r<t;++r)u+=n[r][o]*e[r];e[o]=(n[t][o]-u)/n[o][o]}return e}const le=2,ue=1e-12;function Re(n,t,e,l){const[o,r,i,u]=S(n,t,e,!0),f=o.length,s=Math.max(2,~~(l*f)),c=new Float64Array(f),a=new Float64Array(f),h=new Float64Array(f).fill(1);for(let g=-1;++g<=le;){const p=[0,s-1];for(let d=0;d<f;++d){const m=o[d],b=p[0],w=p[1],y=m-o[b]>o[w]-m?b:w;let X=0,A=0,q=0,Q=0,U=0;const ie=1/Math.abs(o[y]-m||1);for(let F=b;F<=w;++F){const E=o[F],T=r[F],R=je(Math.abs(m-E)*ie)*h[F],j=E*R;X+=R,A+=j,q+=T*R,Q+=T*j,U+=E*j}const[fe,se]=I(A/X,q/X,Q/X,U/X);c[d]=fe+se*m,a[d]=Math.abs(r[d]-c[d]),ze(o,d+1,p)}if(g===le)break;const M=he(a);if(Math.abs(M)<ue)break;for(let d=0,m,b;d<f;++d)m=a[d]/(6*M),h[d]=m>=1?ue:(b=1-m*m)*b}return Pe(o,c,i,u)}function je(n){return(n=1-n*n*n)*n*n}function ze(n,t,e){const l=n[t];let o=e[0],r=e[1]+1;if(r>=n.length)return;for(;t>o&&n[r]-l<=l-n[o];)e[0]=++o,e[1]=r,++r}function Pe(n,t,e,l){const o=n.length,r=[];let i=0,u=0,f=[],s;for(;i<o;++i)s=n[i]+e,f[0]===s?f[1]+=(t[i]-f[1])/++u:(u=0,f[1]+=l,f=[s,t[i]],r.push(f));return f[1]+=l,r}const De=.5*Math.PI/180;function Qe(n,t,e,l){e=e||25,l=Math.max(e,l||200);const o=M=>[M,n(M)],r=t[0],i=t[1],u=i-r,f=u/l,s=[o(r)],c=[];if(e===l){for(let M=1;M<l;++M)s.push(o(r+M/e*u));return s.push(o(i)),s}else{c.push(o(i));for(let M=e;--M>0;)c.push(o(r+M/e*u))}let a=s[0],h=c[c.length-1];const g=1/u,p=Ue(a[1],c);for(;h;){const M=o((a[0]+h[0])/2),d=M[0]-a[0]>=f;d&&Te(a,M,h,g,p)>De?c.push(M):(a=h,s.push(h),c.pop()),h=c[c.length-1]}return s}function Ue(n,t){let e=n,l=n;const o=t.length;for(let r=0;r<o;++r){const i=t[r][1];i<e&&(e=i),i>l&&(l=i)}return 1/(l-e)}function Te(n,t,e,l,o){const r=Math.atan2(o*(e[1]-n[1]),l*(e[0]-n[0])),i=Math.atan2(o*(t[1]-n[1]),l*(t[0]-n[0]));return Math.abs(r-i)}export{G as bandwidthNRD,ge as bin,Me as bootstrapCI,$ as cumulativeLogNormal,P as cumulativeNormal,te as cumulativeUniform,V as densityLogNormal,H as densityNormal,ee as densityUniform,de as dotbin,_ as quantileLogNormal,D as quantileNormal,ne as quantileUniform,v as quantiles,B as quartiles,N as random,be as randomInteger,Xe as randomKDE,we as randomLCG,qe as randomLogNormal,Ye as randomMixture,J as randomNormal,Ae as randomUniform,Le as regressionExp,re as regressionLinear,Re as regressionLoess,Fe as regressionLog,ke as regressionPoly,Ie as regressionPow,oe as regressionQuad,Qe as sampleCurve,O as sampleLogNormal,z as sampleNormal,x as sampleUniform,pe as setRandom};export default null;
