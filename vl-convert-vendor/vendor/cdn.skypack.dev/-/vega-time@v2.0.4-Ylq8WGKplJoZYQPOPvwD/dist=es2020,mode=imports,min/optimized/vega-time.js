import{array as Mt,error as N,hasOwnProperty as Tt,extend as Ut,span as yt,peek as ht,toSet as Ct,constant as Yt,zero as S,one as St}from"/-/vega-util@v1.17.0-uRskU0IBL2vWCP4Va8OC/dist=es2020,mode=imports,min/optimized/vega-util.js";import{timeDay as x,timeWeek as K,utcDay as b,utcWeek as X,timeYear as wt,timeMonth as _,timeHour as It,timeMinute as Ft,timeSecond as pt,timeMillisecond as vt,utcYear as kt,utcMonth as V,utcHour as Et,utcMinute as Ot,utcSecond as Ht,utcMillisecond as Wt}from"/-/d3-time@v2.1.1-PTBGxK4TEXAXwlMfuGhA/dist=es2020,mode=imports,min/optimized/d3-time.js";import{bisector as xt,tickStep as J}from"/-/d3-array@v2.12.1-Ilh7e293asl3yQWpnFdl/dist=es2020,mode=imports,min/optimized/d3-array.js";const s="year",g="quarter",f="month",a="week",D="date",l="day",U="dayofyear",M="hours",T="minutes",y="seconds",h="milliseconds",Z=[s,g,f,a,D,l,U,M,T,y,h],R=Z.reduce((t,e,n)=>(t[e]=1+n,t),{});function $(t){const e=Mt(t).slice(),n={};e.length||N("Missing time unit."),e.forEach(o=>{Tt(R,o)?n[o]=1:N("Invalid time unit: ".concat(o,"."))});const r=(n[a]||n[l]?1:0)+(n[g]||n[f]||n[D]?1:0)+(n[U]?1:0);return r>1&&N("Incompatible time units: ".concat(t)),e.sort((o,i)=>R[o]-R[i]),e}const bt={[s]:"%Y ",[g]:"Q%q ",[f]:"%b ",[D]:"%d ",[a]:"W%U ",[l]:"%a ",[U]:"%j ",[M]:"%H:00",[T]:"00:%M",[y]:":%S",[h]:".%L",["".concat(s,"-").concat(f)]:"%Y-%m ",["".concat(s,"-").concat(f,"-").concat(D)]:"%Y-%m-%d ",["".concat(M,"-").concat(T)]:"%H:%M"};function At(t,e){const n=Ut({},bt,e),r=$(t),o=r.length;let i="",u=0,c,d;for(u=0;u<o;)for(c=r.length;c>u;--c)if(d=r.slice(u,c).join("-"),n[d]!=null){i+=n[d],u=c;break}return i.trim()}const C=new Date;function j(t){return C.setFullYear(t),C.setMonth(0),C.setDate(1),C.setHours(0,0,0,0),C}function Nt(t){return tt(new Date(t))}function Rt(t){return q(new Date(t))}function tt(t){return x.count(j(t.getFullYear())-1,t)}function q(t){return K.count(j(t.getFullYear())-1,t)}function z(t){return j(t).getDay()}function jt(t,e,n,r,o,i,u){if(0<=t&&t<100){const c=new Date(-1,e,n,r,o,i,u);return c.setFullYear(t),c}return new Date(t,e,n,r,o,i,u)}function qt(t){return et(new Date(t))}function zt(t){return G(new Date(t))}function et(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return b.count(e-1,t)}function G(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return X.count(e-1,t)}function B(t){return C.setTime(Date.UTC(t,0,1)),C.getUTCDay()}function Gt(t,e,n,r,o,i,u){if(0<=t&&t<100){const c=new Date(Date.UTC(-1,e,n,r,o,i,u));return c.setUTCFullYear(n.y),c}return new Date(Date.UTC(t,e,n,r,o,i,u))}function nt(t,e,n,r,o){const i=e||1,u=ht(t),c=(O,H,W)=>(W=W||O,Bt(n[W],r[W],O===u&&i,H)),d=new Date,m=Ct(t),st=m[s]?c(s):Yt(2012),lt=m[f]?c(f):m[g]?c(g):S,ft=m[a]&&m[l]?c(l,1,a+l):m[a]?c(a,1):m[l]?c(l,1):m[D]?c(D,1):m[U]?c(U,1):St,mt=m[M]?c(M):S,dt=m[T]?c(T):S,gt=m[y]?c(y):S,Dt=m[h]?c(h):S;return function(O){d.setTime(+O);const H=st(d);return o(H,lt(d),ft(d,H),mt(d),dt(d),gt(d),Dt(d))}}function Bt(t,e,n,r){const o=n<=1?t:r?(i,u)=>r+n*Math.floor((t(i,u)-r)/n):(i,u)=>n*Math.floor(t(i,u)/n);return e?(i,u)=>e(o(i,u),u):o}function Y(t,e,n){return e+t*7-(n+6)%7}const Lt={[s]:t=>t.getFullYear(),[g]:t=>Math.floor(t.getMonth()/3),[f]:t=>t.getMonth(),[D]:t=>t.getDate(),[M]:t=>t.getHours(),[T]:t=>t.getMinutes(),[y]:t=>t.getSeconds(),[h]:t=>t.getMilliseconds(),[U]:t=>tt(t),[a]:t=>q(t),[a+l]:(t,e)=>Y(q(t),t.getDay(),z(e)),[l]:(t,e)=>Y(1,t.getDay(),z(e))},Pt={[g]:t=>3*t,[a]:(t,e)=>Y(t,0,z(e))};function Qt(t,e){return nt(t,e||1,Lt,Pt,jt)}const Kt={[s]:t=>t.getUTCFullYear(),[g]:t=>Math.floor(t.getUTCMonth()/3),[f]:t=>t.getUTCMonth(),[D]:t=>t.getUTCDate(),[M]:t=>t.getUTCHours(),[T]:t=>t.getUTCMinutes(),[y]:t=>t.getUTCSeconds(),[h]:t=>t.getUTCMilliseconds(),[U]:t=>et(t),[a]:t=>G(t),[l]:(t,e)=>Y(1,t.getUTCDay(),B(e)),[a+l]:(t,e)=>Y(G(t),t.getUTCDay(),B(e))},Xt={[g]:t=>3*t,[a]:(t,e)=>Y(t,0,B(e))};function _t(t,e){return nt(t,e||1,Kt,Xt,Gt)}const Vt={[s]:wt,[g]:_.every(3),[f]:_,[a]:K,[D]:x,[l]:x,[U]:x,[M]:It,[T]:Ft,[y]:pt,[h]:vt},Jt={[s]:kt,[g]:V.every(3),[f]:V,[a]:X,[D]:b,[l]:b,[U]:b,[M]:Et,[T]:Ot,[y]:Ht,[h]:Wt};function L(t){return Vt[t]}function P(t){return Jt[t]}function ot(t,e,n){return t?t.offset(e,n):void 0}function Zt(t,e,n){return ot(L(t),e,n)}function $t(t,e,n){return ot(P(t),e,n)}function rt(t,e,n,r){return t?t.range(e,n,r):void 0}function te(t,e,n,r){return rt(L(t),e,n,r)}function ee(t,e,n,r){return rt(P(t),e,n,r)}const w=1e3,I=w*60,F=I*60,A=F*24,ne=A*7,ct=A*30,Q=A*365,ut=[s,f,D,M,T,y,h],p=ut.slice(0,-1),v=p.slice(0,-1),k=v.slice(0,-1),oe=k.slice(0,-1),re=[s,a],it=[s,f],at=[s],E=[[p,1,w],[p,5,5*w],[p,15,15*w],[p,30,30*w],[v,1,I],[v,5,5*I],[v,15,15*I],[v,30,30*I],[k,1,F],[k,3,3*F],[k,6,6*F],[k,12,12*F],[oe,1,A],[re,1,ne],[it,1,ct],[it,3,3*ct],[at,1,Q]];function ce(t){const e=t.extent,n=t.maxbins||40,r=Math.abs(yt(e))/n;let o=xt(c=>c[2]).right(E,r),i,u;return o===E.length?(i=at,u=J(e[0]/Q,e[1]/Q,n)):o?(o=E[r/E[o-1][2]<E[o][2]/r?o-1:o],i=o[0],u=o[1]):(i=ut,u=Math.max(J(e[0],e[1],n),1)),{units:i,step:u}}export{D as DATE,l as DAY,U as DAYOFYEAR,M as HOURS,h as MILLISECONDS,T as MINUTES,f as MONTH,g as QUARTER,y as SECONDS,Z as TIME_UNITS,a as WEEK,s as YEAR,Nt as dayofyear,ce as timeBin,Qt as timeFloor,L as timeInterval,Zt as timeOffset,te as timeSequence,At as timeUnitSpecifier,$ as timeUnits,_t as utcFloor,P as utcInterval,$t as utcOffset,ee as utcSequence,qt as utcdayofyear,zt as utcweek,Rt as week};export default null;
