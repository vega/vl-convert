function sn(n,e){return n.parent===e.parent?1:2}function on(n){return n.reduce(dn,0)/n.length}function dn(n,e){return n+e.x}function pn(n){return 1+n.reduce(gn,0)}function gn(n,e){return Math.max(n,e.y)}function yn(n){for(var e;e=n.children;)n=e[0];return n}function xn(n){for(var e;e=n.children;)n=e[e.length-1];return n}function mn(){var n=sn,e=1,r=1,t=!1;function i(u){var l,s=0;u.eachAfter(function(a){var d=a.children;d?(a.x=on(d),a.y=pn(d)):(a.x=l?s+=n(a,l):0,a.y=0,l=a)});var h=yn(u),f=xn(u),c=h.x-n(h,f)/2,o=f.x+n(f,h)/2;return u.eachAfter(t?function(a){a.x=(a.x-u.x)*e,a.y=(u.y-a.y)*r}:function(a){a.x=(a.x-c)/(o-c)*e,a.y=(1-(u.y?a.y/u.y:1))*r})}return i.separation=function(u){return arguments.length?(n=u,i):n},i.size=function(u){return arguments.length?(t=!1,e=+u[0],r=+u[1],i):t?null:[e,r]},i.nodeSize=function(u){return arguments.length?(t=!0,e=+u[0],r=+u[1],i):t?[e,r]:null},i}function vn(n){var e=0,r=n.children,t=r&&r.length;if(!t)e=1;else for(;--t>=0;)e+=r[t].value;n.value=e}function wn(){return this.eachAfter(vn)}function _n(n,e){let r=-1;for(const t of this)n.call(e,t,++r,this);return this}function zn(n,e){for(var r=this,t=[r],i,u,l=-1;r=t.pop();)if(n.call(e,r,++l,this),i=r.children)for(u=i.length-1;u>=0;--u)t.push(i[u]);return this}function An(n,e){for(var r=this,t=[r],i=[],u,l,s,h=-1;r=t.pop();)if(i.push(r),u=r.children)for(l=0,s=u.length;l<s;++l)t.push(u[l]);for(;r=i.pop();)n.call(e,r,++h,this);return this}function Mn(n,e){let r=-1;for(const t of this)if(n.call(e,t,++r,this))return t}function kn(n){return this.eachAfter(function(e){for(var r=+n(e.data)||0,t=e.children,i=t&&t.length;--i>=0;)r+=t[i].value;e.value=r})}function qn(n){return this.eachBefore(function(e){e.children&&e.children.sort(n)})}function Sn(n){for(var e=this,r=Rn(e,n),t=[e];e!==r;)e=e.parent,t.push(e);for(var i=t.length;n!==r;)t.splice(i,0,n),n=n.parent;return t}function Rn(n,e){if(n===e)return n;var r=n.ancestors(),t=e.ancestors(),i=null;for(n=r.pop(),e=t.pop();n===e;)i=n,n=r.pop(),e=t.pop();return i}function In(){for(var n=this,e=[n];n=n.parent;)e.push(n);return e}function Nn(){return Array.from(this)}function En(){var n=[];return this.eachBefore(function(e){e.children||n.push(e)}),n}function Bn(){var n=this,e=[];return n.each(function(r){r!==n&&e.push({source:r.parent,target:r})}),e}function*Ln(){var n=this,e,r=[n],t,i,u;do for(e=r.reverse(),r=[];n=e.pop();)if(yield n,t=n.children)for(i=0,u=t.length;i<u;++i)r.push(t[i]);while(r.length)}function O(n,e){n instanceof Map?(n=[void 0,n],e===void 0&&(e=$n)):e===void 0&&(e=Tn);for(var r=new S(n),t,i=[r],u,l,s,h;t=i.pop();)if((l=e(t.data))&&(h=(l=Array.from(l)).length))for(t.children=l,s=h-1;s>=0;--s)i.push(u=l[s]=new S(l[s])),u.parent=t,u.depth=t.depth+1;return r.eachBefore(H)}function Cn(){return O(this).eachBefore(bn)}function Tn(n){return n.children}function $n(n){return Array.isArray(n)?n[1]:null}function bn(n){n.data.value!==void 0&&(n.value=n.data.value),n.data=n.data.data}function H(n){var e=0;do n.height=e;while((n=n.parent)&&n.height<++e)}function S(n){this.data=n,this.depth=this.height=0,this.parent=null}S.prototype=O.prototype={constructor:S,count:wn,each:_n,eachAfter:An,eachBefore:zn,find:Mn,sum:kn,sort:qn,path:Sn,ancestors:In,descendants:Nn,leaves:En,links:Bn,copy:Cn,[Symbol.iterator]:Ln};function Dn(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function On(n){for(var e=n.length,r,t;e;)t=Math.random()*e--|0,r=n[e],n[e]=n[t],n[t]=r;return n}function Z(n){for(var e=0,r=(n=On(Array.from(n))).length,t=[],i,u;e<r;)i=n[e],u&&F(u,i)?++e:(u=Wn(t=Vn(t,i)),e=0);return u}function Vn(n,e){var r,t;if(V(e,n))return[e];for(r=0;r<n.length;++r)if(L(e,n[r])&&V(E(n[r],e),n))return[n[r],e];for(r=0;r<n.length-1;++r)for(t=r+1;t<n.length;++t)if(L(E(n[r],n[t]),e)&&L(E(n[r],e),n[t])&&L(E(n[t],e),n[r])&&V(G(n[r],n[t],e),n))return[n[r],n[t],e];throw new Error}function L(n,e){var r=n.r-e.r,t=e.x-n.x,i=e.y-n.y;return r<0||r*r<t*t+i*i}function F(n,e){var r=n.r-e.r+Math.max(n.r,e.r,1)*1e-9,t=e.x-n.x,i=e.y-n.y;return r>0&&r*r>t*t+i*i}function V(n,e){for(var r=0;r<e.length;++r)if(!F(n,e[r]))return!1;return!0}function Wn(n){switch(n.length){case 1:return Pn(n[0]);case 2:return E(n[0],n[1]);case 3:return G(n[0],n[1],n[2])}}function Pn(n){return{x:n.x,y:n.y,r:n.r}}function E(n,e){var r=n.x,t=n.y,i=n.r,u=e.x,l=e.y,s=e.r,h=u-r,f=l-t,c=s-i,o=Math.sqrt(h*h+f*f);return{x:(r+u+h/o*c)/2,y:(t+l+f/o*c)/2,r:(o+i+s)/2}}function G(n,e,r){var t=n.x,i=n.y,u=n.r,l=e.x,s=e.y,h=e.r,f=r.x,c=r.y,o=r.r,a=t-l,d=t-f,p=i-s,g=i-c,y=h-u,x=o-u,m=t*t+i*i-u*u,_=m-l*l-s*s+h*h,w=m-f*f-c*c+o*o,v=d*p-a*g,z=(p*w-g*_)/(v*2)-t,k=(g*y-p*x)/v,A=(d*_-a*w)/(v*2)-i,M=(a*x-d*y)/v,I=k*k+M*M-1,q=2*(u+z*k+A*M),Y=z*z+A*A-u*u,D=-(I?(q+Math.sqrt(q*q-4*I*Y))/(2*I):Y/q);return{x:t+z+k*D,y:i+A+M*D,r:D}}function J(n,e,r){var t=n.x-e.x,i,u,l=n.y-e.y,s,h,f=t*t+l*l;f?(u=e.r+r.r,u*=u,h=n.r+r.r,h*=h,u>h?(i=(f+h-u)/(2*f),s=Math.sqrt(Math.max(0,h/f-i*i)),r.x=n.x-i*t-s*l,r.y=n.y-i*l+s*t):(i=(f+u-h)/(2*f),s=Math.sqrt(Math.max(0,u/f-i*i)),r.x=e.x+i*t-s*l,r.y=e.y+i*l+s*t)):(r.x=e.x+r.r,r.y=e.y)}function Q(n,e){var r=n.r+e.r-1e-6,t=e.x-n.x,i=e.y-n.y;return r>0&&r*r>t*t+i*i}function U(n){var e=n._,r=n.next._,t=e.r+r.r,i=(e.x*r.r+r.x*e.r)/t,u=(e.y*r.r+r.y*e.r)/t;return i*i+u*u}function C(n){this._=n,this.next=null,this.previous=null}function nn(n){if(!(i=(n=Dn(n)).length))return 0;var e,r,t,i,u,l,s,h,f,c,o;if(e=n[0],e.x=0,e.y=0,!(i>1))return e.r;if(r=n[1],e.x=-r.r,r.x=e.r,r.y=0,!(i>2))return e.r+r.r;J(r,e,t=n[2]),e=new C(e),r=new C(r),t=new C(t),e.next=t.previous=r,r.next=e.previous=t,t.next=r.previous=e;n:for(s=3;s<i;++s){J(e._,r._,t=n[s]),t=new C(t),h=r.next,f=e.previous,c=r._.r,o=e._.r;do if(c<=o){if(Q(h._,t._)){r=h,e.next=r,r.previous=e,--s;continue n}c+=h._.r,h=h.next}else{if(Q(f._,t._)){e=f,e.next=r,r.previous=e,--s;continue n}o+=f._.r,f=f.previous}while(h!==f.next);for(t.previous=e,t.next=r,e.next=r.previous=r=t,u=U(e);(t=t.next)!==r;)(l=U(t))<u&&(e=t,u=l);r=e.next}for(e=[r._],t=r;(t=t.next)!==r;)e.push(t._);for(t=Z(e),s=0;s<i;++s)e=n[s],e.x-=t.x,e.y-=t.y;return t.r}function jn(n){return nn(n),n}function T(n){return n==null?null:en(n)}function en(n){if(typeof n!="function")throw new Error;return n}function R(){return 0}function N(n){return function(){return n}}function Kn(n){return Math.sqrt(n.value)}function Xn(){var n=null,e=1,r=1,t=R;function i(u){return u.x=e/2,u.y=r/2,n?u.eachBefore(rn(n)).eachAfter(W(t,.5)).eachBefore(tn(1)):u.eachBefore(rn(Kn)).eachAfter(W(R,1)).eachAfter(W(t,u.r/Math.min(e,r))).eachBefore(tn(Math.min(e,r)/(2*u.r))),u}return i.radius=function(u){return arguments.length?(n=T(u),i):n},i.size=function(u){return arguments.length?(e=+u[0],r=+u[1],i):[e,r]},i.padding=function(u){return arguments.length?(t=typeof u=="function"?u:N(+u),i):t},i}function rn(n){return function(e){e.children||(e.r=Math.max(0,+n(e)||0))}}function W(n,e){return function(r){if(t=r.children){var t,i,u=t.length,l=n(r)*e||0,s;if(l)for(i=0;i<u;++i)t[i].r+=l;if(s=nn(t),l)for(i=0;i<u;++i)t[i].r-=l;r.r=s+l}}}function tn(n){return function(e){var r=e.parent;e.r*=n,r&&(e.x=r.x+n*e.x,e.y=r.y+n*e.y)}}function un(n){n.x0=Math.round(n.x0),n.y0=Math.round(n.y0),n.x1=Math.round(n.x1),n.y1=Math.round(n.y1)}function B(n,e,r,t,i){for(var u=n.children,l,s=-1,h=u.length,f=n.value&&(t-e)/n.value;++s<h;)l=u[s],l.y0=r,l.y1=i,l.x0=e,l.x1=e+=l.value*f}function Yn(){var n=1,e=1,r=0,t=!1;function i(l){var s=l.height+1;return l.x0=l.y0=r,l.x1=n,l.y1=e/s,l.eachBefore(u(e,s)),t&&l.eachBefore(un),l}function u(l,s){return function(h){h.children&&B(h,h.x0,l*(h.depth+1)/s,h.x1,l*(h.depth+2)/s);var f=h.x0,c=h.y0,o=h.x1-r,a=h.y1-r;o<f&&(f=o=(f+o)/2),a<c&&(c=a=(c+a)/2),h.x0=f,h.y0=c,h.x1=o,h.y1=a}}return i.round=function(l){return arguments.length?(t=!!l,i):t},i.size=function(l){return arguments.length?(n=+l[0],e=+l[1],i):[n,e]},i.padding=function(l){return arguments.length?(r=+l,i):r},i}var Hn={depth:-1},an={},P={};function Zn(n){return n.id}function Fn(n){return n.parentId}function Gn(){var n=Zn,e=Fn,r;function t(i){var u=Array.from(i),l=n,s=e,h,f,c,o,a,d,p,g,y=new Map;if(r!=null){const x=u.map((w,v)=>Jn(r(w,v,i))),m=x.map(fn),_=new Set(x).add("");for(const w of m)_.has(w)||(_.add(w),x.push(w),m.push(fn(w)),u.push(P));l=(w,v)=>x[v],s=(w,v)=>m[v]}for(c=0,h=u.length;c<h;++c)f=u[c],d=u[c]=new S(f),(p=l(f,c,i))!=null&&(p+="")&&(g=d.id=p,y.set(g,y.has(g)?an:d)),(p=s(f,c,i))!=null&&(p+="")&&(d.parent=p);for(c=0;c<h;++c)if(d=u[c],p=d.parent){if(a=y.get(p),!a)throw new Error("missing: "+p);if(a===an)throw new Error("ambiguous: "+p);a.children?a.children.push(d):a.children=[d],d.parent=a}else{if(o)throw new Error("multiple roots");o=d}if(!o)throw new Error("no root");if(r!=null){for(;o.data===P&&o.children.length===1;)o=o.children[0],--h;for(let x=u.length-1;x>=0&&!(d=u[x],d.data!==P);--x)d.data=null}if(o.parent=Hn,o.eachBefore(function(x){x.depth=x.parent.depth+1,--h}).eachBefore(H),o.parent=null,h>0)throw new Error("cycle");return o}return t.id=function(i){return arguments.length?(n=T(i),t):n},t.parentId=function(i){return arguments.length?(e=T(i),t):e},t.path=function(i){return arguments.length?(r=T(i),t):r},t}function Jn(n){n=`${n}`;let e=n.length;return j(n,e-1)&&!j(n,e-2)&&(n=n.slice(0,-1)),n[0]==="/"?n:`/${n}`}function fn(n){let e=n.length;if(e<2)return"";for(;--e>1&&!j(n,e););return n.slice(0,e)}function j(n,e){if(n[e]==="/"){let r=0;for(;e>0&&n[--e]==="\\";)++r;if((r&1)===0)return!0}return!1}function Qn(n,e){return n.parent===e.parent?1:2}function K(n){var e=n.children;return e?e[0]:n.t}function X(n){var e=n.children;return e?e[e.length-1]:n.t}function Un(n,e,r){var t=r/(e.i-n.i);e.c-=t,e.s+=r,n.c+=t,e.z+=r,e.m+=r}function ne(n){for(var e=0,r=0,t=n.children,i=t.length,u;--i>=0;)u=t[i],u.z+=e,u.m+=e,e+=u.s+(r+=u.c)}function ee(n,e,r){return n.a.parent===e.parent?n.a:r}function $(n,e){this._=n,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}$.prototype=Object.create(S.prototype);function re(n){for(var e=new $(n,0),r,t=[e],i,u,l,s;r=t.pop();)if(u=r._.children)for(r.children=new Array(s=u.length),l=s-1;l>=0;--l)t.push(i=r.children[l]=new $(u[l],l)),i.parent=r;return(e.parent=new $(null,0)).children=[e],e}function te(){var n=Qn,e=1,r=1,t=null;function i(f){var c=re(f);if(c.eachAfter(u),c.parent.m=-c.z,c.eachBefore(l),t)f.eachBefore(h);else{var o=f,a=f,d=f;f.eachBefore(function(m){m.x<o.x&&(o=m),m.x>a.x&&(a=m),m.depth>d.depth&&(d=m)});var p=o===a?1:n(o,a)/2,g=p-o.x,y=e/(a.x+p+g),x=r/(d.depth||1);f.eachBefore(function(m){m.x=(m.x+g)*y,m.y=m.depth*x})}return f}function u(f){var c=f.children,o=f.parent.children,a=f.i?o[f.i-1]:null;if(c){ne(f);var d=(c[0].z+c[c.length-1].z)/2;a?(f.z=a.z+n(f._,a._),f.m=f.z-d):f.z=d}else a&&(f.z=a.z+n(f._,a._));f.parent.A=s(f,a,f.parent.A||o[0])}function l(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}function s(f,c,o){if(c){for(var a=f,d=f,p=c,g=a.parent.children[0],y=a.m,x=d.m,m=p.m,_=g.m,w;p=X(p),a=K(a),p&&a;)g=K(g),d=X(d),d.a=f,w=p.z+m-a.z-y+n(p._,a._),w>0&&(Un(ee(p,f,o),f,w),y+=w,x+=w),m+=p.m,y+=a.m,_+=g.m,x+=d.m;p&&!X(d)&&(d.t=p,d.m+=m-x),a&&!K(g)&&(g.t=a,g.m+=y-_,o=f)}return o}function h(f){f.x*=e,f.y=f.depth*r}return i.separation=function(f){return arguments.length?(n=f,i):n},i.size=function(f){return arguments.length?(t=!1,e=+f[0],r=+f[1],i):t?null:[e,r]},i.nodeSize=function(f){return arguments.length?(t=!0,e=+f[0],r=+f[1],i):t?[e,r]:null},i}function b(n,e,r,t,i){for(var u=n.children,l,s=-1,h=u.length,f=n.value&&(i-r)/n.value;++s<h;)l=u[s],l.x0=e,l.x1=t,l.y0=r,l.y1=r+=l.value*f}var ln=(1+Math.sqrt(5))/2;function cn(n,e,r,t,i,u){for(var l=[],s=e.children,h,f,c=0,o=0,a=s.length,d,p,g=e.value,y,x,m,_,w,v,z;c<a;){d=i-r,p=u-t;do y=s[o++].value;while(!y&&o<a);for(x=m=y,v=Math.max(p/d,d/p)/(g*n),z=y*y*v,w=Math.max(m/z,z/x);o<a;++o){if(y+=f=s[o].value,f<x&&(x=f),f>m&&(m=f),z=y*y*v,_=Math.max(m/z,z/x),_>w){y-=f;break}w=_}l.push(h={value:y,dice:d<p,children:s.slice(c,o)}),h.dice?B(h,r,t,i,g?t+=p*y/g:u):b(h,r,t,g?r+=d*y/g:i,u),g-=y,c=o}return l}var hn=function n(e){function r(t,i,u,l,s){cn(e,t,i,u,l,s)}return r.ratio=function(t){return n((t=+t)>1?t:1)},r}(ln);function ie(){var n=hn,e=!1,r=1,t=1,i=[0],u=R,l=R,s=R,h=R,f=R;function c(a){return a.x0=a.y0=0,a.x1=r,a.y1=t,a.eachBefore(o),i=[0],e&&a.eachBefore(un),a}function o(a){var d=i[a.depth],p=a.x0+d,g=a.y0+d,y=a.x1-d,x=a.y1-d;y<p&&(p=y=(p+y)/2),x<g&&(g=x=(g+x)/2),a.x0=p,a.y0=g,a.x1=y,a.y1=x,a.children&&(d=i[a.depth+1]=u(a)/2,p+=f(a)-d,g+=l(a)-d,y-=s(a)-d,x-=h(a)-d,y<p&&(p=y=(p+y)/2),x<g&&(g=x=(g+x)/2),n(a,p,g,y,x))}return c.round=function(a){return arguments.length?(e=!!a,c):e},c.size=function(a){return arguments.length?(r=+a[0],t=+a[1],c):[r,t]},c.tile=function(a){return arguments.length?(n=en(a),c):n},c.padding=function(a){return arguments.length?c.paddingInner(a).paddingOuter(a):c.paddingInner()},c.paddingInner=function(a){return arguments.length?(u=typeof a=="function"?a:N(+a),c):u},c.paddingOuter=function(a){return arguments.length?c.paddingTop(a).paddingRight(a).paddingBottom(a).paddingLeft(a):c.paddingTop()},c.paddingTop=function(a){return arguments.length?(l=typeof a=="function"?a:N(+a),c):l},c.paddingRight=function(a){return arguments.length?(s=typeof a=="function"?a:N(+a),c):s},c.paddingBottom=function(a){return arguments.length?(h=typeof a=="function"?a:N(+a),c):h},c.paddingLeft=function(a){return arguments.length?(f=typeof a=="function"?a:N(+a),c):f},c}function ue(n,e,r,t,i){var u=n.children,l,s=u.length,h,f=new Array(s+1);for(f[0]=h=l=0;l<s;++l)f[l+1]=h+=u[l].value;c(0,s,n.value,e,r,t,i);function c(o,a,d,p,g,y,x){if(o>=a-1){var m=u[o];m.x0=p,m.y0=g,m.x1=y,m.y1=x;return}for(var _=f[o],w=d/2+_,v=o+1,z=a-1;v<z;){var k=v+z>>>1;f[k]<w?v=k+1:z=k}w-f[v-1]<f[v]-w&&o+1<v&&--v;var A=f[v]-_,M=d-A;if(y-p>x-g){var I=d?(p*M+y*A)/d:y;c(o,v,A,p,g,I,x),c(v,a,M,I,g,y,x)}else{var q=d?(g*M+x*A)/d:x;c(o,v,A,p,g,y,q),c(v,a,M,p,q,y,x)}}}function ae(n,e,r,t,i){(n.depth&1?b:B)(n,e,r,t,i)}var fe=function n(e){function r(t,i,u,l,s){if((h=t._squarify)&&h.ratio===e)for(var h,f,c,o,a=-1,d,p=h.length,g=t.value;++a<p;){for(f=h[a],c=f.children,o=f.value=0,d=c.length;o<d;++o)f.value+=c[o].value;f.dice?B(f,i,u,l,g?u+=(s-u)*f.value/g:s):b(f,i,u,g?i+=(l-i)*f.value/g:l,s),g-=f.value}else t._squarify=h=cn(e,t,i,u,l,s),h.ratio=e}return r.ratio=function(t){return n((t=+t)>1?t:1)},r}(ln);export{S as Node,mn as cluster,O as hierarchy,Xn as pack,Z as packEnclose,jn as packSiblings,Yn as partition,Gn as stratify,te as tree,ie as treemap,ue as treemapBinary,B as treemapDice,fe as treemapResquarify,b as treemapSlice,ae as treemapSliceDice,hn as treemapSquarify};export default null;
