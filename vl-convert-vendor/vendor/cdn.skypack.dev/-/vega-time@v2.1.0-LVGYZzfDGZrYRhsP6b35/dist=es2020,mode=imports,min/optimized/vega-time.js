import{array as Mt,error as A,hasOwnProperty as Tt,extend as Ut,span as yt,peek as Ct,toSet as ht,constant as Yt,zero as S,one as St}from"/-/vega-util@v1.17.0-uRskU0IBL2vWCP4Va8OC/dist=es2020,mode=imports,min/optimized/vega-util.js";import{timeDay as b,timeWeek as K,utcDay as x,utcWeek as _,timeYear as wt,timeMonth as V,timeHour as It,timeMinute as Ft,timeSecond as kt,timeMillisecond as pt,utcYear as vt,utcMonth as J,utcHour as Et,utcMinute as Ot,utcSecond as Wt,utcMillisecond as Ht}from"/-/d3-time@v3.0.0-Ww07wkuPsE2c8Ac33BKQ/dist=es2020,mode=imports,min/optimized/d3-time.js";import{bisector as bt,tickStep as X}from"/-/d3-array@v3.1.1-Ibshj34oOmCw8da1RLSW/dist=es2020,mode=imports,min/optimized/d3-array.js";const s="year",g="quarter",f="month",a="week",D="date",l="day",U="dayofyear",M="hours",T="minutes",y="seconds",C="milliseconds",Z=[s,g,f,a,D,l,U,M,T,y,C],R=Z.reduce((t,e,n)=>(t[e]=1+n,t),{});function $(t){const e=Mt(t).slice(),n={};e.length||A("Missing time unit."),e.forEach(o=>{Tt(R,o)?n[o]=1:A("Invalid time unit: ".concat(o,"."))});const r=(n[a]||n[l]?1:0)+(n[g]||n[f]||n[D]?1:0)+(n[U]?1:0);return r>1&&A("Incompatible time units: ".concat(t)),e.sort((o,i)=>R[o]-R[i]),e}const xt={[s]:"%Y ",[g]:"Q%q ",[f]:"%b ",[D]:"%d ",[a]:"W%U ",[l]:"%a ",[U]:"%j ",[M]:"%H:00",[T]:"00:%M",[y]:":%S",[C]:".%L",["".concat(s,"-").concat(f)]:"%Y-%m ",["".concat(s,"-").concat(f,"-").concat(D)]:"%Y-%m-%d ",["".concat(M,"-").concat(T)]:"%H:%M"};function Nt(t,e){const n=Ut({},xt,e),r=$(t),o=r.length;let i="",u=0,c,d;for(u=0;u<o;)for(c=r.length;c>u;--c)if(d=r.slice(u,c).join("-"),n[d]!=null){i+=n[d],u=c;break}return i.trim()}const h=new Date;function j(t){return h.setFullYear(t),h.setMonth(0),h.setDate(1),h.setHours(0,0,0,0),h}function At(t){return tt(new Date(t))}function Rt(t){return q(new Date(t))}function tt(t){return b.count(j(t.getFullYear())-1,t)}function q(t){return K.count(j(t.getFullYear())-1,t)}function z(t){return j(t).getDay()}function jt(t,e,n,r,o,i,u){if(0<=t&&t<100){const c=new Date(-1,e,n,r,o,i,u);return c.setFullYear(t),c}return new Date(t,e,n,r,o,i,u)}function qt(t){return et(new Date(t))}function zt(t){return L(new Date(t))}function et(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return x.count(e-1,t)}function L(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return _.count(e-1,t)}function B(t){return h.setTime(Date.UTC(t,0,1)),h.getUTCDay()}function Lt(t,e,n,r,o,i,u){if(0<=t&&t<100){const c=new Date(Date.UTC(-1,e,n,r,o,i,u));return c.setUTCFullYear(n.y),c}return new Date(Date.UTC(t,e,n,r,o,i,u))}function nt(t,e,n,r,o){const i=e||1,u=Ct(t),c=(O,W,H)=>(H=H||O,Bt(n[H],r[H],O===u&&i,W)),d=new Date,m=ht(t),st=m[s]?c(s):Yt(2012),lt=m[f]?c(f):m[g]?c(g):S,ft=m[a]&&m[l]?c(l,1,a+l):m[a]?c(a,1):m[l]?c(l,1):m[D]?c(D,1):m[U]?c(U,1):St,mt=m[M]?c(M):S,dt=m[T]?c(T):S,gt=m[y]?c(y):S,Dt=m[C]?c(C):S;return function(O){d.setTime(+O);const W=st(d);return o(W,lt(d),ft(d,W),mt(d),dt(d),gt(d),Dt(d))}}function Bt(t,e,n,r){const o=n<=1?t:r?(i,u)=>r+n*Math.floor((t(i,u)-r)/n):(i,u)=>n*Math.floor(t(i,u)/n);return e?(i,u)=>e(o(i,u),u):o}function Y(t,e,n){return e+t*7-(n+6)%7}const Pt={[s]:t=>t.getFullYear(),[g]:t=>Math.floor(t.getMonth()/3),[f]:t=>t.getMonth(),[D]:t=>t.getDate(),[M]:t=>t.getHours(),[T]:t=>t.getMinutes(),[y]:t=>t.getSeconds(),[C]:t=>t.getMilliseconds(),[U]:t=>tt(t),[a]:t=>q(t),[a+l]:(t,e)=>Y(q(t),t.getDay(),z(e)),[l]:(t,e)=>Y(1,t.getDay(),z(e))},Qt={[g]:t=>3*t,[a]:(t,e)=>Y(t,0,z(e))};function Gt(t,e){return nt(t,e||1,Pt,Qt,jt)}const Kt={[s]:t=>t.getUTCFullYear(),[g]:t=>Math.floor(t.getUTCMonth()/3),[f]:t=>t.getUTCMonth(),[D]:t=>t.getUTCDate(),[M]:t=>t.getUTCHours(),[T]:t=>t.getUTCMinutes(),[y]:t=>t.getUTCSeconds(),[C]:t=>t.getUTCMilliseconds(),[U]:t=>et(t),[a]:t=>L(t),[l]:(t,e)=>Y(1,t.getUTCDay(),B(e)),[a+l]:(t,e)=>Y(L(t),t.getUTCDay(),B(e))},_t={[g]:t=>3*t,[a]:(t,e)=>Y(t,0,B(e))};function Vt(t,e){return nt(t,e||1,Kt,_t,Lt)}const Jt={[s]:wt,[g]:V.every(3),[f]:V,[a]:K,[D]:b,[l]:b,[U]:b,[M]:It,[T]:Ft,[y]:kt,[C]:pt},Xt={[s]:vt,[g]:J.every(3),[f]:J,[a]:_,[D]:x,[l]:x,[U]:x,[M]:Et,[T]:Ot,[y]:Wt,[C]:Ht};function P(t){return Jt[t]}function Q(t){return Xt[t]}function ot(t,e,n){return t?t.offset(e,n):void 0}function Zt(t,e,n){return ot(P(t),e,n)}function $t(t,e,n){return ot(Q(t),e,n)}function rt(t,e,n,r){return t?t.range(e,n,r):void 0}function te(t,e,n,r){return rt(P(t),e,n,r)}function ee(t,e,n,r){return rt(Q(t),e,n,r)}const w=1e3,I=w*60,F=I*60,N=F*24,ne=N*7,ct=N*30,G=N*365,ut=[s,f,D,M,T,y,C],k=ut.slice(0,-1),p=k.slice(0,-1),v=p.slice(0,-1),oe=v.slice(0,-1),re=[s,a],it=[s,f],at=[s],E=[[k,1,w],[k,5,5*w],[k,15,15*w],[k,30,30*w],[p,1,I],[p,5,5*I],[p,15,15*I],[p,30,30*I],[v,1,F],[v,3,3*F],[v,6,6*F],[v,12,12*F],[oe,1,N],[re,1,ne],[it,1,ct],[it,3,3*ct],[at,1,G]];function ce(t){const e=t.extent,n=t.maxbins||40,r=Math.abs(yt(e))/n;let o=bt(c=>c[2]).right(E,r),i,u;return o===E.length?(i=at,u=X(e[0]/G,e[1]/G,n)):o?(o=E[r/E[o-1][2]<E[o][2]/r?o-1:o],i=o[0],u=o[1]):(i=ut,u=Math.max(X(e[0],e[1],n),1)),{units:i,step:u}}export{D as DATE,l as DAY,U as DAYOFYEAR,M as HOURS,C as MILLISECONDS,T as MINUTES,f as MONTH,g as QUARTER,y as SECONDS,Z as TIME_UNITS,a as WEEK,s as YEAR,At as dayofyear,ce as timeBin,Gt as timeFloor,P as timeInterval,Zt as timeOffset,te as timeSequence,Nt as timeUnitSpecifier,$ as timeUnits,Vt as utcFloor,Q as utcInterval,$t as utcOffset,ee as utcSequence,qt as utcdayofyear,zt as utcweek,Rt as week};export default null;
